---
layout: post
title: "Petite découverte de CloudBees"
date: 2011-11-14
comments: false
categories:
 - java
 - cloudbees
 - avis
 - intégration continue
---

<div class='post'>
<div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-F_mNTL2_BE4/TsACHNBk0fI/AAAAAAAAAdE/Ngcp8YNiDL0/s1600/cloudbees03.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="95" src="http://1.bp.blogspot.com/-F_mNTL2_BE4/TsACHNBk0fI/AAAAAAAAAdE/Ngcp8YNiDL0/s200/cloudbees03.png" width="200" /></a></div><div style="text-align: justify;">La semaine dernière, j'ai eu la chance d'assister à un atelier sur <a href="http://www.cloudbees.com/">CloudBees</a> chez nos amis de <a href="http://blog.xebia.fr/">Xebia</a>.&nbsp;</div><br /><div style="text-align: justify;">Ce dernier a été organisé avec brio par (je le fais par ordre alphabétique pour éviter tout favoritisme ;-) ) :</div><br /><ul><li>Eric Briand</li><li>Simon Caplette</li><li><a href="https://twitter.com/#%21/ndeloof">Nicolas De Loof</a>&nbsp;</li><li><a href="https://twitter.com/#%21/cyrilleleclerc">Cyrille Leclerc</a></li><li><a href="https://twitter.com/#%21/olim7t">Olivier Michallat</a></li><li><a href="https://twitter.com/#%21/jlrigau">Jean-Louis Rigau</a></li><li><a href="https://twitter.com/#%21/eservent">Emmanuel Servent</a>&nbsp;</li></ul><div style="text-align: justify;">Comme d'habitude, organisation bien rodée et atelier préparé aux petits oignons mais ce n'est pas le but de mon article...</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">L'objectif de cet article est, pour ceux qui n'étaient pas présents, de faire un rapide tour d'horizon de ce qui m'a marqué dans la solution qu'apporte Cloudbees avec ses offres DEV@Cloud et RUN@Cloud. Cet article sera&nbsp;surtout focalisé sur la partie usine logicielle offerte par Cloudbees car c'est celle qui a été mise en avant pendant l'atelier et c'est aussi celle qui me semble la plus intéressante du point de vue de mes besoins actuels.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Je vais donc essayer de vous résumer ce que j'ai apprécié... Pour ce faire, je ne reviendrai pas sur le <i>usecase</i> qui a été utilisé car je pense qu'il vaut mieux assister à l'atelier et qu'il faut bien laisser un peu de suspens... ;-). De même,&nbsp;je ne parlerai ni de l'intérêt du <i>cloud</i> ni de comment mettre en place DEV@Cloud ou RUN@Cloud.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Cet article s'articulera donc en deux parties :</div><ul><li style="text-align: justify;">la première consistant en un très rapide retour sur ce que propose CloudBees,</li><li style="text-align: justify;">et la deuxième sur ce qui me plait dans une approche telle que celle proposée par CloudBees.</li></ul><div style="text-align: justify;"><u>PS</u> : au passage, encore un grand merci aux organisateurs de l'atelier!</div><!-- more --><h1>      {DEV,RUN}@Cloud?... Kesako?</h1><div style="text-align: justify;">CloudBees propose deux services DEV@Cloud et RUN@Cloud.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">DEV@Cloud offre, pour sa part, un service de type <strike>PaaS (<i>Platform As A Service</i>)</strike>&nbsp;SaaS (<i>Software As A Service</i>) qui offre un environnement de développement, de construction et de test en s'appuyant sur le <i>cloud</i>.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">DEV@Cloud permet :</div><ul><li style="text-align: justify;">de collaborer avec d'autres personnes en s'appuyant sur des SCM/DVCS comme SVN ou Git,</li><li style="text-align: justify;">de construire, tester et déployer de manière continue avec <a href="http://jenkins-ci.org/">Jenkins</a>,</li><li style="text-align: justify;">de tester l'application web cible en s'appuyant sur le service à la demande <a href="http://saucelabs.com/">SauceLab</a>,</li><li style="text-align: justify;">de controler la qualité du code en s'appuyant sur <a href="http://www.sonarsource.org/">Sonar</a>,</li><li style="text-align: justify;">de gérer les&nbsp;artéfacts&nbsp;en utilisant <a href="http://www.jfrog.com/products.php">Artifactory</a>.</li></ul><div style="text-align: justify;">RUN@Cloud fournit, quant à lui, un ensemble d'outils permettant de simplifier le processus de déploiement d'une application Java dans le <i>cloud</i>. Il correspond, pour sa part, un service de type&nbsp;PaaS (<i>Platform As A Service</i>).</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-aGeioKNPLJc/TsACXTWxgJI/AAAAAAAAAdM/yG4C8B3PmOA/s1600/cloudbees04.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="135" src="http://1.bp.blogspot.com/-aGeioKNPLJc/TsACXTWxgJI/AAAAAAAAAdM/yG4C8B3PmOA/s400/cloudbees04.png" width="400" /></a></div><br /><div style="text-align: justify;"><u>PS</u> : vous aurez remarqué que, pour cette partie, je ne me suis pas trop foulé puisque je n'ai fait que reprendre les informations présentes sur le site... ;-)</div><h1>      C'est bien gentil tout ça et moi, ça m'apporte quoi?</h1><div style="text-align: justify;">Comme vous avez pu le constater, DEV@Cloud et RUN@Cloud fournissent tout pleins de services.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Cependant, la première question qui me vient à l'esprit quand je vois tout ça, c'est :&nbsp;</div><blockquote class="tr_bq">"ben, je fais pareil dans mon usine logicielle... : pourquoi je m'embêterai à payer une solution et surtout, pourquoi serais-je prêt à perdre la main sur mon infra mais aussi qu'on m'enlève l'occasion de m'amuser avec de nouveaux jouets..."&nbsp;</blockquote><div style="text-align: justify;">(pour le dernier argument, cela ne regarde que moi... ;-))</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-dDnr_qH0vM0/TsACyBmfmsI/AAAAAAAAAdU/TI3TYA-Ujmc/s1600/Cloudbees01.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="283" src="http://2.bp.blogspot.com/-dDnr_qH0vM0/TsACyBmfmsI/AAAAAAAAAdU/TI3TYA-Ujmc/s400/Cloudbees01.png" width="400" /></a></div><br /><div style="text-align: justify;">En fait, les réponses sont simples (et je ne parlerai pas des réponses évidentes de coûts -infra, supervision, maintenance, etc.-).</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Déjà revenons sur les possibilités offertes par DEV@Cloud (je n'aborderai pas le fait que CloudBees propose également l'hébergement du SCM, du Repository Manager et de Sonar) :</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">En offrant la partie orchestrateur (via Jenkins), on délègue au <i>cloud</i>&nbsp;le soin de gérer les agents de build. Ainsi, il n'y a plus à administrer la ferme de serveurs succeptibles d'héberger les agents (tâche assez réberbative et ingrate).</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">De plus, en combinant la partie <i>build</i>/<i>package</i> à la partie RUN@Cloud permettant de déployer de manière continue l'application sur une instance dédiée, cela permet de tester fonctionnellement et de manière intégrer la solution. Encore une fois, en passant par un service de CloudBees, il n'y a plus à se soucier de devoir réserver un serveur ou de devoir déployer un conteneur de servlets puisque cela est fait pour nous.&nbsp;</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Concernant les tests à proprement parler, CloudBees offre une intégration avec <a href="http://saucelabs.com/">SauceLab</a> qui se charge de l'exécution des tests Selenium (ie. qui prends à sa charge l'installation des agents Selenium ainsi que leurs configurations en mettant à disposition les browsers (butineurs ;-)) nécessaires à l'exécution des tests Selenium). En outre, SauceLab propose même la vidéo du test exécuté permettant, ainsi,&nbsp;<i>a postériori</i> d'analyser ce qui a échoué pendant le test. Bien sûr, DEV@Cloud n'offre pas encore la décorrélation entre le test fonctionnel exécuté et la partie vue mais, coté infrastructure, il n'y a plus à se soucier des agents et coté analyse, il n'est plus nécessaire d'analyser les rapports <i>surefire</i> pour connaitre le test en échec.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Il est également possible d'effectuer un test de charge en s'appuyant sur le plugin maven <a href="http://jmeter.apache.org/">JMeter</a>&nbsp;en ciblant l'instance déployée dans RUN@Cloud.&nbsp;L'intégration avec le service&nbsp;<a href="http://newrelic.com/">New Relic</a>&nbsp;offre la possibilité de superviser l'activité de l'instance afin d'évaluer son comportement.&nbsp;En outre, en configurant RUN@Cloud de manière <i>scalable</i>, il est aisé de tester la charge supportée par de multiples instances (pour ce faire, CloudBees passe par un <i>load balancer</i> qui, si je ne me trompe pas, fonctionne, à ce jour, en <i>round-robin</i>). L'intégration du service New Relic permet de s'abstraire de la mise en place d'une solution comme Hyperic sur un environnement de recette, chose qui manque régulièrement et qui peut être consommateur en temps. En outre, New Relic permet même de déterminer les points de contension en offrant la possibilité d'activer un profiling à chaud dans l'application cible.&nbsp;</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Concernant le comportement applicatif, l'intégration du service <a href="https://papertrailapp.com/">Papertrail</a>&nbsp;offre la possibilité d'accéder aux logs de l'application mais permet également d'agréger les logs pour l'ensemble des instances et de les analyser. Ce dernier point est généralement manquant lors de la mise en place d'un environnement de test/validation/recette pour des questions d'infrastructure mais également de moyen. Aussi, disposer d'un tel service intégré avec l'offre RUN@Cloud dans un contexte de test (mais, bien sûr, pas uniquement) apporte un réel plus dans l'analyse des anomalies et du comportement de l'application.</div><h1>      Conclusion</h1><div style="text-align: justify;">Vous l'aurez compris (enfin, je l'espère), les offres DEV@Cloud et RUN@Cloud de CloudBees m'ont vraiment fait bonne impression. Je n'ai fait qu'effleurer les possibilités offertes et je suis sûrement passé à coté de beaucoup de <i>features</i> mais je tenais tout de même à partager mon ressenti sur ces offres.</div><div style="text-align: justify;">C'est vrai que mon article est très orienté usine logicielle (peut être parce que c'est justement le point de départ de l'atelier) mais, au moins pour ce seul point, il mérite qu'on s'intéresse aux services offerts par CloudBees (et services, il y en a...).</div><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-Nws_YjWNluM/TsAC_MmnpzI/AAAAAAAAAdc/W78rV1GiHns/s1600/cloudbees02.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="400" src="http://4.bp.blogspot.com/-Nws_YjWNluM/TsAC_MmnpzI/AAAAAAAAAdc/W78rV1GiHns/s400/cloudbees02.png" width="231" /></a></div><br /><div style="text-align: justify;">Cependant, il reste un point qui me chagrine... en effet, CloudBees offre une excellente forge logicielle clé en main et qui semble parfaitement fonctionnelle mais, à mon sens, ce qui manque le plus est la bonne utilisation de ces outils et surtout, en amont, la bonne compréhension de ce qu'est une bonne usine logicielle et de son importance.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Bien sûr, si le client est réticent, il est toujours possible de faire une approche <i>bottom/up</i>&nbsp;en attaquant par la forge et en lui montrant le gain mais, je trouve cela dommage que l'on soit obligé d'en arriver là alors qu'il devrait en voir tout le bénéfice (un peu comme maitriser son livrable et son build ou le cycle de vie de son application...) surtout dans un contexte où <i>l'agilité</i>&nbsp;est un terme de plus en plus courant et qui prone des livraisons fréquentes, chose possible que si l'on dispose d'une bonne méthodologie, d'une bonne forge et que l'on a compris de l'intérêt des TUs, du refactoring et de la revue de code...</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Enfin, je m'égare... ;-)<br />Pour revenir à nos moutons, ce que j'ai apprécié avec DEV@Cloud et RUN@Cloud est la grande intéraction et la modularisation des services avec Jenkins. Cependant, même si la solution offerte par CloudBees est de qualité et est simple à mettre en oeuvre en étant clé en main, il reste du ressort de l'équipe de mettre en place les bonnes pratiques pour construire l'usine logicielle sans lesquelles aussi bon que soient les outils et services à sa disposition, cela s'achèvera par un échec (enfin, là, il s'agit de mon humble avis... ;-)).<br /><br />Pour finir, je tiens à préciser que je n'ai pas testé de manière plus approfondie les différents services offerts par CloudBees autre que ce qui nous a été présenté lors de l'atelier et j'espère ne pas avoir dénaturé le produit. Si des points étaient à ajouter, n'hésitez pas à m'en faire part afin de pouvoir compléter l'approche&nbsp;naïve&nbsp;que je pourrais en avoir ;-)</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">A noter&nbsp;aussi que concernant l'injection de charge, à ce jour, il n'existe pas de possibilité de <i>scaler</i> les injecteurs dans différents agents, ce qui limite l'intérêt de l'injection (je ne reviendrai pas sur le fait que si l'injecteur est saturé, cela fausse les résultats obtenus pour le SUT (<i>System Under Test</i>)) mais que cela devrait être résolu dans un futur proche.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><u>PS</u> : Je tenais aussi à préciser que je ne touche rien pour ce post mais que cela me faisait plaisir de parler d'un truc que j'ai apprécié (et puis je fais ce qui me chante avec mon blog... !! ;-) ) et puis aussi à remercier Stéphanie pour avoir consacré du temps à relire cet article et m'avoir apporté son esprit critique ;-)</div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Khanh</div>
<div class='content'>
Salut Nicolas,<br />Merci pour la précision : j&#39;ai rectifié la boulette ;-).<br />A+</div>
</div>
<div class='comment'>
<div class='author'>nicolas deloof</div>
<div class='content'>
Merci pour cet article, content que la soirée ai bien marché.<br />Juste pour te taquiner, techniquement parlant, RUN est un PaaS : Platform (d&#39;hébergement pour les applications web java) as a Service* et DEV est un SaaS : Software (intégration continue jenkins + ...) as a Service. En tout cas tu a très bien compris la force de cette offre *aaS et ce qu&#39;elle peut t&#39;apporter concrètement :D</div>
</div>
<div class='comment'>
<div class='author'>Khanh</div>
<div class='content'>
Cool! <br /><br />Merci que l&#39;article plaise et sinon un autocollant suffira ;-)<br /><br />Longue vie à CloudBees! ;-)<br /><br />Khanh</div>
</div>
<div class='comment'>
<div class='author'>Sacha Labourey</div>
<div class='content'>
Merci pour l&#39;article, tu recevras ton chèque la semaine prochaine, comme prévu ;)<br /><br />Plus sérieusement, je suis d&#39;accord que l&#39;offre manque d&#39;une &quot;documentation&quot; de type &quot;best practices&quot; qui permet de guider les nouveaux utilisateurs sur une utilisation &quot;conseillée&quot; de l&#39;offre, libre ensuite à eux de personnaliser leur usage bien évidemment.<br /><br />Nous allons travailler sur une doc.<br /><br />A+,<br /><br />Sacha<br /><br />CEO CloudBees, Inc.</div>
</div>
</div>
