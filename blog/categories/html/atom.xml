<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: html | Jetoile]]></title>
  <link href="https://blog.jetoile.fr/blog/categories/html/atom.xml" rel="self"/>
  <link href="https://blog.jetoile.fr/"/>
  <updated>2017-01-27T13:35:31+01:00</updated>
  <id>https://blog.jetoile.fr/</id>
  <author>
    <name><![CDATA[Khanh Maudoux]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Livereload et Linux ou comment rédiger du html simplement]]></title>
    <link href="https://blog.jetoile.fr/2014/03/livereload-et-linux-ou-comment-rediger.html"/>
    <updated>2014-03-20T11:24:11+01:00</updated>
    <id>https://blog.jetoile.fr/2014/03/livereload-et-linux-ou-comment-rediger</id>
    <content type="html"><![CDATA[<p><img src="http://3.bp.blogspot.com/-iICRkMH0vhY/UxnsLscNtII/AAAAAAAABRA/uXMjhVZjOBg/s1600/ubuntu_livereload.png" alt="left-small" /></p>

<p>Cet article n'a rien à voir avec le monde Java.</p>

<p>Il s'agit plus d'un petit tutoriel surtout destiné&hellip; à moi-même&hellip; ;&ndash;)</p>

<p>En effet, mon blog étant hébergé sur blogger, lorsque je rédige un article, je le fais le plus souvent directement en HTML. Afin d'avoir une idée de l'aperçu, je le charge directement dans mon navigateur mais passer son temps à faire du Alt-Tab/F5 a rapidement commencé à m'énerver.</p>

<p>Aussi, ayant entendu parlé depuis un moment de livereload, je me suis dis que cela pouvait être pas mal de l'utiliser.</p>

<p>Cependant, j'avoue avoir subi un échec cuisant (je suis sous un environnement linux et je tiens à préciser que je ne suis pas des plus à l'aise avec le monde nodejs ou ruby &ndash; ceci explique aussi cela&hellip; ;&ndash;) ) et cela malgré avoir mes multiples tentatives (à coup de gem install) et recherche sur mon ami Google (enfin, quand on n'est pas doué, on n'est pas doué&hellip; :&lsquo;( )</p>

<p>Du coup, j'ai pris l'option :</p>

<blockquote><p>&ldquo;J'appelle un ami&rdquo;</p></blockquote>

<p>Dans mon cas, je remercie <a href="https://twitter.com/hcapitaine">Harold</a> pour son aide.</p>

<p>Il m'a conseillé de me jeter un oeil sur <a href="http://gruntjs.com/">Grunt</a> qui gérait nativement livereload (bon, pour ma défense, je n'avais pas prévu de partir sur Grunt&hellip; ;&ndash;) ).</p>

<p>Cet article présentera donc comment j'ai réussi à faire fonctionner le bouzin avec, en prime, la possibilité d'utiliser Markdown.</p>

<p>Concernant l'environnement, il s'agit d'Ubuntu 13.10 (sur Mac, je ne doute pas que cela aurait été plus simple mais bon&hellip;)</p>

<p>[NDLR : encore une fois, je précise que je ne suis pas du tout expert dans ce domaine, il est donc inutile de me poser des questions. Par contre, toutes propositions d'amélioration est la bienvenue ;&ndash;)]</p>

<p>A titre informatifs, les fichiers se trouvent sur <a href="https://github.com/jetoile/livereload-grunt">Github</a>.</p>

<!-- more -->


<h1>Installation de nodejs, de npm et de grunt</h1>

<p>Dans un premier temps, il convient d'installer tout le strict minimum afin de permettre à Grunt de fonctionner.</p>

<p>Installation de NodeJS :
<code>bash
sudo apt-get install nodejs
</code></p>

<p>Installation de Npm :
<code>bash
sudo apt-get install npm
</code></p>

<p>Installation de Grunt (de manière global au système) :
<code>bash
sudo npm install -g grunt-cli
</code></p>

<p>Installer le <a href="http://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions-">plugin</a> livereload sur Chrome ou Firefox.</p>

<p>Dans le cas de Chrome, pensez à modifier sa configuration pour qu'il autorise l'accès aux URLs de fichiers.
<img src="http://1.bp.blogspot.com/-jg_Pm58wTpc/Uxno8Z2A74I/AAAAAAAABQo/zUsVZpiPSz4/s1600/chrome-config.png" alt="medium" /></p>

<h1>Configuration de Grunt</h1>

<p>Par la suite, toutes les opérations seront effectué dans le répertoire <code>$HOME/tmp</code>.</p>

<p>Une fois tous les logiciels installés, il ne reste qu'à créer les fichiers nécessaires au bon fonctionnement de Grunt :</p>

<ul>
<li><code>package.json</code> qui permet de télécharger les modules et de les installer localement dans répertoire courant (un peu comme la rubrique dependencies de Maven),</li>
<li><code>gruntfile.js</code> qui permet de configurer les différents modules précédemment installés par la commande npm install (un peu comme la rubrique build/plugins de Maven).</li>
</ul>


<p><code>$HOME/tmp/package.json</code></p>

<p>```javascript
{
  &ldquo;name&rdquo;: &ldquo;yo&rdquo;,
  &ldquo;version&rdquo;: &ldquo;0.0.0&rdquo;,
  &ldquo;dependencies&rdquo;: {},
  &ldquo;devDependencies&rdquo;: {</p>

<pre><code>"grunt": "~0.4.1",
"matchdep": "~0.1.2",
"grunt-express": "~1.0.0-beta2",
"grunt-contrib-watch": "~0.5.1",
"grunt-open": "~0.2.1"
</code></pre>

<p>  },
  &ldquo;engines&rdquo;: {</p>

<pre><code>"node": "&gt;=0.8.0"
</code></pre>

<p>  }
}
```</p>

<p>Il convient maintenant de lancer le téléchargement et l'installation des modules en exécutant la commande suivante :
<code>bash
npm install
</code></p>

<p>Ne reste plus qu'à configurer les modules via le fichier Gruntfile.js.</p>

<p><code>$HOME/tmp/Gruntfile.js</code></p>

<p>```javascript
module.exports = function(grunt) {</p>

<p>  // Load Grunt tasks declared in the package.json file
  require(&lsquo;matchdep&rsquo;).filterDev(&lsquo;grunt-*&rsquo;).forEach(grunt.loadNpmTasks);</p>

<p>  grunt.initConfig({</p>

<pre><code>// grunt-express will serve the files from the folders listed in `bases` on specified `port` and `hostname`
express: {
  all: {
    options: {
      port: 9000,
      hostname: "0.0.0.0",
      bases: ['html'], // Replace with the directory you want the files served from
                          // Make sure you don't use `.` or `..` in the path as Express
                          // is likely to return 403 Forbidden responses if you do
                          // http://stackoverflow.com/questions/14594121/express-res-sendfile-throwing-forbidden-error
      livereload: true
    }
  }
},

// grunt-watch will monitor the projects files
watch: {
  all: {
    files: '*.html',
    options: {
      livereload: true
    }
  }
},

// grunt-open will open your browser at the project's URL
open: {
  all: {
    path: 'http://localhost:&lt;%= express.all.options.port%&gt;'
  }
}
</code></pre>

<p>  });</p>

<p>  // Creates the <code>server</code> task
  grunt.registerTask(&lsquo;default&rsquo;, [</p>

<pre><code>'express',
'open',
'watch'
</code></pre>

<p>  ]);
```</p>

<p>Cette configuration est fonctionnelle avec l'arborescence suivante :</p>

<p><img src="http://4.bp.blogspot.com/-yzXs78VTiFw/Uxnor5jGo_I/AAAAAAAABQY/01_s7DCQHT4/s1600/arbo01.png" alt="center" /></p>

<p>Dans cette dernière et avec cette configuration, tous les fichiers du répertoire <code>html</code> avec l'extension .html seront suivis par livereload. Aussi, il suffit de créer un fichier html dans le répertoire <code>html</code> (par exemple html/sample.html) et de lancer la commande :</p>

<p><code>bash
grunt
</code>
Le navigateur par défaut s'ouvrira alors avec l'url : <a href="http://localhost:9000/.">http://localhost:9000/.</a> Il suffit d'y ajouter la page voulu (dans notre exemple <a href="http://localhost:9000/sample.html">http://localhost:9000/sample.html</a>) et d'activer le plugin <code>livereload</code>.</p>

<p><img src="http://1.bp.blogspot.com/-edBGc5pdGLg/UxnpKGFtjsI/AAAAAAAABQw/E6maHZkgGcs/s1600/icon_livereload.png" alt="center" /></p>

<p>Il ne reste plus qu'à modifier le fichier html et lors de sa sauvegarde, la page sera automatiquement mis à jour dans le navigateur!</p>

<p>Si l'erreur suivante apparait :</p>

<p><code>bash
/usr/bin/env: node: Aucun fichier ou dossier de ce type
</code></p>

<p>Il faut installer <code>nodejs-legacy</code> (cf. <a href="https://github.com/volojs/volo/issues/154">ici</a>)</p>

<p><code>bash
sudo apt-get install nodejs-legacy
</code></p>

<h1>Configuration de Grunt pour l'intégration de Markdown</h1>

<p>L'intégration de Markdown se fait de la même manière que précédemment.</p>

<p>Les fichiers <code>package.json</code> et <code>Gruntfile.js</code> se voient juste ajouter le module <code>grunt-markdown</code>.</p>

<p><code>package.json</code>
```javascript
{
  &ldquo;name&rdquo;: &ldquo;yo&rdquo;,
  &ldquo;version&rdquo;: &ldquo;0.0.0&rdquo;,
  &ldquo;dependencies&rdquo;: {},
  &ldquo;devDependencies&rdquo;: {</p>

<pre><code>"grunt": "~0.4.1",
"matchdep": "~0.1.2",
"grunt-express": "~1.0.0-beta2",
"grunt-contrib-watch": "~0.5.1",
"grunt-open": "~0.2.1",
"grunt-markdown": "~0.5.0"
</code></pre>

<p>  },
  &ldquo;engines&rdquo;: {</p>

<pre><code>"node": "&gt;=0.8.0"
</code></pre>

<p>  }
}
```</p>

<p><code>Gruntfile.js</code></p>

<p>```javascript
odule.exports = function(grunt) {
  require(&lsquo;matchdep&rsquo;).filterDev(&lsquo;grunt-*&rsquo;).forEach(grunt.loadNpmTasks);</p>

<p>  grunt.initConfig({</p>

<pre><code> markdown: {
  all: {
    files: [
      {
        expand: true,
        src: '*.md',
        dest: 'html/',
        ext: '.html'
      }
    ]
  }
},

express: {
  all: {
    options: {
      port: 9000,
      hostname: "0.0.0.0",
      bases: ['html'], 
      livereload: true
    }
  }
},

watch: {
  all: {
    files: ['*.md','*.html'],
    tasks : ['markdown'],
    options: {
      livereload: true
    }
  }
},

open: {
  all: {
    path: 'http://localhost:&lt;%= express.all.options.port%&gt;'
  }
}
</code></pre>

<p>  });</p>

<p>  grunt.registerTask(&lsquo;default&rsquo;, [</p>

<pre><code>'markdown',
'express',
'open',
'watch'
</code></pre>

<p>  ]);
};
```</p>

<p>Suite à la modification de ces fichiers (attention à penser de faire un <code>npm install</code> après modification du fichier <code>package.json</code>), il est alors possible d'écrire son document en Markdown.</p>

<p>L'arborescence à respecter par rapport à la configuration est la suivante :
<img src="http://2.bp.blogspot.com/-kgC6a8jRwG8/Uxno29Sr9EI/AAAAAAAABQg/lf3W_rnDAvU/s1600/arbo02.png" alt="center" /></p>

<p>Lors de la modification du fichier .md, son pendant html sera automatiquement créé (ou modifié) et pris en compte par un rechargement du navigateur.</p>

<h1>Conclusion</h1>

<p>Comme on a pu le voir, au final, configurer livereload pour permettre un rechargement automatique lors de la modification d'un fichier HTML ou Markdown n'est pas si compliquée une fois que l'on a tous les fichiers et les bons modules configurés.</p>

<p>D'ailleurs, cet article est le premier écrit en Markdown (quand je disais que ce n'était pas ma tasse de thé&hellip;).</p>

<p>En espérant qu'il pourra être utile à d'autres lecteurs et en m'excusant par avance si des informations sont approximatives&hellip;</p>

<h1>Pour aller plus loin&hellip;</h1>

<ul>
<li><a href="http://rhumaric.com/2013/07/renewing-the-grunt-livereload-magic/">http://rhumaric.com/2013/07/renewing-the-grunt-livereload-magic/</a></li>
<li><a href="http://justinklemm.com/grunt-watch-livereload-javascript-less-sass-compilation/">http://justinklemm.com/grunt-watch-livereload-javascript-less-sass-compilation/</a></li>
<li><a href="http://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions-">http://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions-</a></li>
<li><a href="http://blog.roddet.com/2013/12/nantesjs-gruntjs/">http://blog.roddet.com/2013/12/nantesjs-gruntjs/</a></li>
<li><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#wiki-lists">https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet#wiki-lists</a></li>
</ul>

]]></content>
  </entry>
  
</feed>
