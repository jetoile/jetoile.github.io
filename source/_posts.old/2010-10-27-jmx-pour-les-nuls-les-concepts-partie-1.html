---
layout: post
title: "JMX pour les nuls... - Les concepts - Partie 1"
date: 2010-10-27
comments: false
categories:
 - java
 - jmx
---

<div class='post'>
<div style="text-align: justify;"><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_XLL8sJPQ97g/TMdPuTpRY8I/AAAAAAAAALQ/R_w0PiLpvwo/s1600/jmx-cover.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="200" src="http://1.bp.blogspot.com/_XLL8sJPQ97g/TMdPuTpRY8I/AAAAAAAAALQ/R_w0PiLpvwo/s200/jmx-cover.png" width="171" /></a></div>Comme promis lors de mon <a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-introduction.html">article précédent</a> (et pour éviter de vous faire languir ;-) ) la première partie de cette série d'article sur JMX!<br /><br /><br /><br /><br /><br /><br /><br /><br /><!-- more --><br /><h1>Table des matières</h1><ul><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html">JMX, qu'est ce que c'est?</a></li><ul><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#generalite">Généralités</a></li><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#architecture">Architecture JMX</a></li><ul><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#instrumentation">Niveau instrumentation</a></li><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#agent">Niveau agent</a></li><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#distribue">Niveau service distribué</a></li></ul><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#composant">Composants JMX</a></li><ul><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#mbean">MBeans</a></li><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#notification">Modèle de notifications</a></li><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#metadonnee">Classe de métadonnées de MBeans</a></li><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#serveur">Serveur de MBeans</a></li><li><a href="http://jetoile.blogspot.com/2010/10/jmx-pour-les-nuls-les-concepts-partie-1.html#services">Service d'agents</a></li></ul></ul><li>Spécifications</li><ul><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-differents-mbeans.html">JMX Instrumentation</a></li><ul><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-differents-mbeans.html#mbean">MBean</a></li><ul><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-differents-mbeans.html#mbean_standard">MBean Standard</a></li><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-differents-mbeans.html#mbean_dynamic">Dynamic MBean</a></li></ul><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-differents-mbeans.html#notification">Notification</a></li><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-differents-mbeans.html#mbean_open">Open MBean</a></li><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-differents-mbeans.html#mbean_model">Model MBean</a></li></ul><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-agents-jmx-partie.html#agent">Agent JMX</a></li><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-classes-de-base.html">Concepts</a></li><ul><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-classes-de-base.html#objectname">ObjectName</a></li><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-classes-de-base.html#objectinstance">ObjectInstance</a></li><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-classes-de-base.html#attribute">Attribute et AttributeList</a></li><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-les-classes-de-base.html#exception">Les Exceptions</a></li></ul><li><a href="http://jetoile.blogspot.com/2010/11/jmx-pour-les-nuls-le-mbean-server.html">MBean Server</a></li><li><a href="http://jetoile.blogspot.com/2010/12/jmx-pour-les-nuls-chargement-dynamique.html">Chargement dynamique des MBeans</a></li><li><a href="http://jetoile.blogspot.com/2010/12/jmx-pour-les-nuls-les-services-jmx.html">Les services JMX</a></li><ul><li><a href="http://jetoile.blogspot.com/2010/12/jmx-pour-les-nuls-les-services-jmx.html#monitoring">Service Monitoring</a></li><li><a href="http://jetoile.blogspot.com/2010/12/jmx-pour-les-nuls-les-services-jmx.html#timer">Service Timer</a></li><li><a href="http://jetoile.blogspot.com/2010/12/jmx-pour-les-nuls-les-services-jmx.html#relation">Service Relation</a></li><li><a href="http://jetoile.blogspot.com/2010/12/jmx-pour-les-nuls-les-services-jmx.html#securite">Service Sécurité</a></li></ul><li><a href="http://jetoile.blogspot.com/2010/12/jmx-pour-les-nuls-les-connecteurs.html">Les Connecteurs</a></li></ul></ul></div><a href="http://www.blogger.com/post-edit.g?blogID=4495310291235200788&amp;postID=7351760651561051545" name="generalite"></a> <h1>JMX, qu’est ce que c’est&nbsp;?</h1><h2>Généralités</h2><div style="text-align: justify;"><i>Java Management eXtensions</i> (JMX) définit une architecture, un design pattern, une API et les services permettant de superviser et d’administrer une application au travers du langage Java.</div><div style="text-align: justify;">JMX permet, en effet :</div><ul><li style="text-align: justify;">d’administrer et de superviser une application Java sans avoir à investir dans de couteux serveurs : l’architecture JMX repose sur un serveur d’objets de base qui peut être vu comme un agent de supervision et d’administration et qui peut fonctionner sur presque toutes les JVM.</li><li style="text-align: justify;">d’offrir une architecture de supervision et d’administration scalable : chaque agent JMX est un module indépendant pouvant se brancher à l’agent de supervision et d’administration de l’application à surveiller.</li><li style="text-align: justify;">de s’interfacer avec une autre solution de supervision et d’administration : les agents JMX peuvent être supervisés et administrés aux travers de différents protocoles (HTTP, SNMP, …) et l’API JMX permet de définir le sien. &nbsp;</li><li style="text-align: justify;">de s’intégrer avec les autres technologies Java présentes dans le système telles que JNDI, JDBC, JINI, SLP, …</li></ul><a href="http://www.blogger.com/post-edit.g?blogID=4495310291235200788&amp;postID=7351760651561051545" name="architecture"></a> <h2>Architecture JMX</h2><div style="text-align: justify;">L’architecture JMX peut se décomposer en trois niveaux :</div><ul><li style="text-align: justify;">le niveau instrumentation (<i>instrumentation level</i>),</li><li style="text-align: justify;">le niveau agent (<i>agent level</i>),</li><li style="text-align: justify;">et le niveau service distribué (<i>distributed services level</i>).</li></ul><div class="separator" style="clear: both; text-align: center;"></div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/_XLL8sJPQ97g/TMdQmiH7InI/AAAAAAAAALY/rXNS-iCKg6A/s1600/jmx-01.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="270" src="http://3.bp.blogspot.com/_XLL8sJPQ97g/TMdQmiH7InI/AAAAAAAAALY/rXNS-iCKg6A/s400/jmx-01.png" width="400" /></a></div><div style="text-align: justify;"></div><a href="http://www.blogger.com/post-edit.g?blogID=4495310291235200788&amp;postID=7351760651561051545" name="instrumentation"></a> <h3>Niveau instrumentation</h3><div style="text-align: justify;">Le niveau instrumentation spécifie comment implémenter des ressources administrable et supervisable par JMX ; une ressource pouvant être une application, une implémentation d’un service, un périphérique, ou autre tant qu’elle est développée en Java (ou qu’un wrapper existe) et qu’elle a été instrumentée pour être compatible JMX.</div><div style="text-align: justify;">L’instrumentation d’une ressource donnée est fournit par la présence d’un ou plusieurs Beans supervisables et administrables (ou MBeans pour <i>Managed Beans</i>) qui peuvent être de plusieurs sortes :</div><ul><li style="text-align: justify;">&nbsp;MBean standard,</li><li style="text-align: justify;">&nbsp;MBean dynamique.</li></ul><div style="text-align: justify;">Ainsi, l’instrumentation d’une ressource permet de la rendre administrable et supervisable au travers du niveau agent. Cela permet aux MBean de s’abstraire du niveau agent et ainsi que de les rendre plus simple et évolutifs.&nbsp;</div><a href="" name="agent"></a> <h3>Niveau agent</h3><div style="text-align: justify;">Le niveau agent spécifie comment implémenter les agents qui permettent le contrôle direct des ressources et qui les rend administrable et supervisable d’une application de supervision et d’administration distante. Les agents se trouvent être généralement sur la même machine que les ressources qu’elles contrôlent mais cela n’est pas un pré-requis.</div><div style="text-align: justify;">Ce niveau s’appuie et utilise le niveau d’instrumentation pour définir des agents standards utilisés pour se superviser et s’administrer elle-même.</div><div style="text-align: justify;">L’agent JMX est constitué d’un serveur de MBeans (<i>MBeanServer</i>) et d’un ensemble de services permettant de manipuler les MBeans. En outre, le MBeanServer nécessite au moins un connecteur ou adaptateur.</div><div style="text-align: justify;">L’agent JMX peut être embarqué dans la machine virtuelle Java qui accueille les ressources JMX à administrer et superviser, ou peut être instancié dans un élément de médiation quand la ressource n’est pas une ressource Java.</div><div style="text-align: justify;">Enfin, l’agent JMX n’a pas besoin de connaitre les ressources qui doivent être administrées et supervisées.</div><div style="text-align: justify;">Le manageur accède donc au MBeans de l’agent et utilise les services fournis par ce dernier au travers un adaptateur de protocoles ou un connecteur. Celui permet à l’agent JMX d’être indépendant et faiblement couplé à l’application de management.</div><a href="" name="distribue"></a> <h3>Niveau service distribué</h3><div style="text-align: justify;">Le niveau service distribué spécifie comment implémenter l’interface d’administration et de supervision JMX. Ce niveau permet de définir les interfaces d’administration et de supervision et les composants qui exploitent les agents ou la hiérarchie d’agents JMX. Ces composants peuvent :</div><ul><li style="text-align: justify;">fournir une interface d’administration et de supervision des applications via leurs agents JMX au travers d’un connecteur,</li><li style="text-align: justify;">exposer une vue d’administration et de supervision d’un agent JMX et de ses MBeans en associant leur signification sémantique avec un protocole haut niveau (comme HTML ou SNMP),</li><li style="text-align: justify;">diffuser les informations de supervision d’une plate-forme de supervision et d’administration à différents agents JMX,</li><li style="text-align: justify;">agréger et consolider les informations de supervision et d’administration en provenance de différents agents JMX dans une vue logique à destination de l’utilisateur final,</li><li style="text-align: justify;">gérer et sécuriser l’administration et la supervision du système.</li></ul><div style="text-align: justify;">En fait, les composants d’administration et de supervision peuvent interagir les uns les autres au sein du réseau afin de fournir des fonctions d’administration et de supervision scalables et distribuées.</div><a href="" name="composant"></a> <h2>Composants JMX</h2><div style="text-align: justify;">JMX s’appuie sur les composants et notions suivants :</div><ul><li style="text-align: justify;">MBeans (<i>standard, dynamic, open et model</i>)</li><li style="text-align: justify;">Modèle de notifications (<i>Notification Model</i>)</li><li style="text-align: justify;">Classe de métadonnées de MBeans (<i>MBean metadata classes</i>)</li><li style="text-align: justify;">Serveur de MBeans (<i>MBean Server</i>)&nbsp;</li><li style="text-align: justify;">Services d’agents (<i>Agent Services</i>)</li></ul><a href="" name="mbean"></a> <h3>MBeans</h3><div style="text-align: justify;">Un MBean est un objet Java qui implémente une interface spécifique et qui respecte un design pattern particulier. Cela permet de normaliser la représentation de l’interface des ressources à gérer dans le MBean. Cette dernière est composée de l’ensemble des informations et des méthodes nécessaires à l’administration et à la supervision de l’application.</div><div style="text-align: justify;">L’interface de gestion d’un MBean peut être composée :</div><ul><li style="text-align: justify;">d’attributs dont les valeurs peuvent être accédées,</li><li style="text-align: justify;">d’opérations qui peuvent être invoquées,</li><li style="text-align: justify;">de notifications qui peuvent être émises,</li><li style="text-align: justify;">de constructeurs (au sens Java du terme)</li></ul><div style="text-align: justify;">En fait, un MBean encapsule les attributs et les opérations au travers de leurs méthodes publiques : par exemple, un attribut en lecture-seule dans un MBean standard n’aura qu’un getter alors qu’un attribut accessible en lecture-écriture disposera d’un getter et d’un setter.</div><div style="text-align: justify;">Ainsi, n’importe quel objet qui implémentera un MBean et qui sera déclaré auprès de l’agent JMX pourra être géré.</div><div style="text-align: justify;">Les autres types de composants JMX comme les services d’agents sont des MBeans complètement instrumentés leur permettant de bénéficier de l’infrastructure JMX.</div><div style="text-align: justify;">La spécification JMX définit quatre types de MBean :</div><ul><li style="text-align: justify;"><i>Standard MBean</i> : c’est l’implémentation de MBean la plus simple. Elle fournit une représentation statique des ressources à gérer et à superviser. Son interface de gestion est décrite par le nom de ses méthodes.</li><li style="text-align: justify;"><i>Dynamic MBean</i> : ce MBean doit implémenter une interface spécifique mais il expose ses interfaces de gestion de manière dynamique à l’exécution.</li><li style="text-align: justify;"><i>Open MBean</i> : ce MBean est une extension du Dynamic MBean mais repose sur une représentation normée de ses types de données afin de permettre plus d’interopérabilité. Pour ce faire, il s’auto-décrit.&nbsp;</li><li style="text-align: justify;"><i>Model MBean</i> : ce MBean est une extension du Dynamic MBean mais est complètement configurable et s’auto-décrit à l’exécution. Il est à noter qu’il fournit une classe générique de MBean qui définit son comportement par défaut qu’il est possible de redéfinir.</li></ul><a href="" name="notification"></a> <h3>Modèle de notifications</h3><div style="text-align: justify;">JMX définit un modèle de notifications génériques qui se base sur le modèle d’événements Java. Les notifications peuvent être émises par une instance de MBean mais aussi par le serveur de MBean lui-même.&nbsp;</div><a href="" name="metadonnee"></a> <h3>Classe de métadonnées de MBeans</h3><div style="text-align: justify;">JMX définit comment les classes doivent décrire les interfaces de gestion des MBean. Ces dernières servent à construire la structure des informations à publier qui est utilisée par le serveur de MBeans. Ainsi, ces classes de métadonnées contiennent la structure qui décrit tout ce dont il a besoin : ses attributs, ses opérations, ses notifications et ses constructeurs mais aussi les caractéristiques de chacun de ces éléments comme la signature des méthodes ou le niveau d’accessibilité des attributs. &nbsp;&nbsp;</div><a href="" name="serveur"></a> <h3>Serveur de MBeans</h3><div style="text-align: justify;">Le serveur de MBean peut être vu comme un registre des objets qui sont gérables au travers de l’agent. Ainsi, chaque objet enregistré dans le serveur de MBean est visible de l’application de gestion.&nbsp;</div><div style="text-align: justify;">Cependant, il n’expose jamais les objets directement mais seulement leurs interfaces même s’il fournit une interface standardisée d’accès aux MBeans présent dans la même JVM.</div><div style="text-align: justify;">Un MBean doit donc être enregistré de manière unique au sein du serveur de MBean et peut l’être par :</div><ul><li style="text-align: justify;">un autre MBean,</li><li style="text-align: justify;">l’agent lui-même,</li><li style="text-align: justify;">une application de gestion distante au travers d’un service distribué.&nbsp;</li></ul><div style="text-align: justify;">Les opérations alors disponibles sur un MBean sont :</div><ul><li style="text-align: justify;">la découverte de l’interface de gestion du MBean,</li><li style="text-align: justify;">la lecture et l’écriture de la valeur des attributs,</li><li style="text-align: justify;">l’invocation des opérations offertes par l’interface de gestion du MBean,</li><li style="text-align: justify;">la récupération des notifications émises par le MBean.</li></ul><div style="text-align: justify;">Pour permettre à un agent d’être accessible depuis une application extérieure, le MBean Server s’appuie sur les adaptateurs de protocoles et les connecteurs.</div><a href="" name="services"></a> <h3>Service d’agents</h3><div style="text-align: justify;">Les services d’agents sont les objets qui gèrent les différentes opérations de gestion des MBean enregistrés dans le serveur de MBeans.&nbsp;</div><div style="text-align: justify;">Ces services d’agents sont généralement eux-mêmes des MBeans et permettent ainsi au serveur de MBeans de les gérer.</div><div style="text-align: justify;">Par défaut, doivent être présents les services suivants :&nbsp;</div><ul><li style="text-align: justify;"><i>Management Applet</i> (m-let) qui permet le chargement dynamique de classes</li><li style="text-align: justify;"><i>Service Timers</i> qui permet de déclencher des actions sur les MBeans de façon régulière</li><li style="text-align: justify;"><i>Service Relation</i> qui permet d’associer des MBeans entre eux</li><li style="text-align: justify;"><i>Service Monitor</i> qui permet de scruter certaines valeurs d’attribut afin de notifier d’autres objets lors d’un changement</li></ul><div style="text-align: justify;"><h1>Le mot de la fin de cette partie</h1><div>Dans cet article, nous avons vu (ou revu) les concepts de bases de JMX. Dans les articles suivants, nous entrerons plus dans les entrailles des spécifications en nous calquant sur les spécifications JMX pour tenter d'y voir un peu plus clair...</div></div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Sarah Kocha</div>
<div class='content'>
bonjour,<br />merci pour ce cours j&#39;ai bien aimé<br />à bientôt avec d&#39;autres cours</div>
</div>
</div>
