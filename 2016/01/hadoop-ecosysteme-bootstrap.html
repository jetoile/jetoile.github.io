
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>

<script type="text/javascript">
    var host = "blog.jetoile.fr";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
        window.location.protocol = "https";
</script>

  <meta charset="utf-8">
  <title>Hadoop Ecosysteme Bootstrap - Jetoile</title>
  <meta name="author" content="Khanh Maudoux">

  <meta content='blog sur Java jee' name='description'/>
  <meta content='jee, java, cloud, nosql' name='keywords'/>
  <meta content='index, follow' name='robots'/>
  <link href='url' rel='canonical'/>

  
  <meta name="description" content="Hadoop Ecosysteme Bootstrap January 18, 2016 Comme je l&#8217;ai déjà dit dans un article précédent, la force d&#8217;Hadoop n&#8217;est plus dans &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://blog.jetoile.fr/2016/01/hadoop-ecosysteme-bootstrap.html">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Jetoile" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>

  <script src="/javascripts/monthly_archive.js"></script>
  <!-- font-family: 'Knewave', cursive; -->
<link href='http://fonts.googleapis.com/css?family=Knewave' rel='stylesheet' type='text/css'>
<!-- font-family: 'Cantata One', serif; -->
<link href='http://fonts.googleapis.com/css?family=Cantata+One' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11955429-1']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_setDomainName','github.io']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

  <body>
    <a href="/" class="home-icon">
      <img src="/images/home.png"/>
    </a>

    <article role="article" class="full-single-article">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <h1>Hadoop Ecosysteme Bootstrap</h1>
        <div class="meta">
          








  



<time datetime="2016-01-18T10:00:00+01:00" pubdate data-updated="true">January 18, 2016</time>  
        </div>
        <p><img src="/images/hadoop-all.png" alt="left-small" />
Comme je l&#8217;ai déjà dit dans un article <a href="/2015/10/hadoop-et-son-ecosysteme.html">précédent</a>, la force d&#8217;Hadoop n&#8217;est plus dans Hadoop en lui-même mais plutôt dans son écosystème.</p>

<p>Du coup, même lorsqu&#8217;on développe avec Spark, il est courant de vouloir s&#8217;interfacer avec le métastore de Hive ou encore avec SolR si l&#8217;objectif est de vouloir indexer dans ce dernier.</p>

<p>Parfois encore, l&#8217;objectif est de lire ou d&#8217;écrire de Kafka via Spark (ou en Spark Streaming).</p>

<p>Ainsi, lorsqu&#8217;on fait du développement avec des composants &ldquo;BigData&rdquo;, on a souvent besoin d&#8217;un écosystème complet.</p>

<p>Alors, bien sûr, dans un monde idéal, il est possible de disposer de tout l&#8217;écosystème via Docker ou via une machine virtuelle. Pourtant, parfois, il n&#8217;est pas possible de disposer de la pleine puissance de son poste parce qu&#8217;on est, parfois (sic&hellip;), dans un contexte où disposer des droits administrateurs de son poste (et pire quand il s&#8217;agit d&#8217;un poste sous Windows&hellip;) est impossible.</p>

<p>Pour ce faire, il existe quelques solutions comme <a href="https://github.com/sakserv/hadoop-mini-clusters">Hadoop-mini-clusters</a>. Cependant, chaque composant doit alors être démarré dans le bon ordre et il faut avouer que c&#8217;est un peu verbeux&hellip;</p>

<p>En outre, les couches clientes fonctionnent principalement dans la même JVM.</p>

<p>L&#8217;objectif de ce post est de proposer une alternative beaucoup moins verbeuse et plus pratique.</p>

<p>Il ne s&#8217;agit que d&#8217;une simple surcouche à Hadoop-mini-clusters mais la solution proposée offre également d&#8217;autres possibilités qui ne sont pas offertes par la solution :</p>

<ul>
<li>possibilité de disposer d&#8217;un SolR qu&#8217;il soit en mode embedded ou en mode cloud</li>
<li>possibilité d&#8217;avoir un oozie accessible par un client externe à la JVM</li>
</ul>


<p>De plus, la solution proposée dans cet article (enfin plutôt sur mon <a href="https://github.com/jetoile/hadoop-bootstrap">github</a>&hellip;) propose :</p>

<ul>
<li>de démarrer l&#8217;écosystème nécessaire dans un contexte de Test d&#8217;intégration</li>
<li>de démarrer l&#8217;écosystème nécessaire en mode standalone avec une simple commande</li>
</ul>


<!-- more -->


<h1>Contexte et proposition</h1>

<p>Comme je l&#8217;ai dit précédemment, le besoin était de pouvoir disposer de l&#8217;écosystème nécessaire à l&#8217;exécution de tests d&#8217;intégration mais également de pouvoir démarrer l&#8217;écosystème nécessaire en mode <em>standalone</em>.</p>

<p>Bien sûr, le tout capable de fonctionner sous Linux mais aussi sous Windows&hellip; (<em>ndlr</em> : oui&hellip; on n&#8217;a pas toujours la main sur ce que nous impose le client&hellip; :&lsquo;( )</p>

<p><a href="https://github.com/sakserv/hadoop-mini-clusters">Hadoop-mini-clusters</a> est un composant très pratique mais un peu verbeux. En outre, devoir configurer chacun des composants alors que, souvent, une configuration par défaut est largement suffisante me semblait un peu inutile.</p>

<p>Enfin, comme je l&#8217;ai déjà dit, <a href="https://github.com/sakserv/hadoop-mini-clusters">Hadoop-mini-clusters</a> a été conçu pour les TU/TI mais dans un cas de foncionnement en mode <em>standalone</em> il faut alors accéder aux composants de manière <em>remote</em>.</p>

<p>Parmi les besoins, les composants suivants :</p>

<ul>
<li>HDFS</li>
<li>Zookeeper</li>
<li>HBase</li>
<li>Hive (ie. HiveMetastore et Hiveserver2)</li>
<li>Kafka</li>
<li>Oozie</li>
<li>SolRCloud</li>
<li>SolR en mode <em>embedded</em></li>
</ul>


<p>Concernant les parties Spark ou MapReduce, ces frameworks disposant déjà d&#8217;un mode &ldquo;développement&rdquo;, il m&#8217;était inutile de les proposer dans ma solution.</p>

<p>La surcouche proposée (que j&#8217;ai décidé d&#8217;appeler <strong>Hadoop-bootstrap</strong>) se trouve <a href="https://github.com/jetoile/hadoop-bootstrap">ici</a></p>

<p>Elle nécessite cependant quelques pré-requis&hellip;</p>

<h1>Prérequis</h1>

<p>Pour fonctionner, Hadoop-bootstrap nécessite d&#8217;avoir téléchargé et décompressé Hadoop sur son poste. Dans mon cas, j&#8217;ai juste récupéré la version d&#8217;<a href="http://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-2.7.1/hadoop-2.7.1.tar.gz">Apache</a> que j&#8217;ai décompressée dans <code>/opt/hadoop</code></p>

<p>Il faut ensuite positionner la variable d&#8217;environnement <code>HADOOP_HOME</code> à l&#8217;endroit où la version d&#8217;Hadoop a été décompressée.</p>

<p>Pour l&#8217;utilisation de Oozie, il est nécessaire de télécharger les <code>sharelib</code> de Oozie qui contient les librairies permettant de lancer des actions Hive, Spark, Shell ou autre : <a href="http://s3.amazonaws.com/public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.3.2.0/tars/oozie-4.2.0.2.3.2.0-2950-distro.tar.gz">http://s3.amazonaws.com/public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.3.2.0/tars/oozie-4.2.0.2.3.2.0-2950-distro.tar.gz</a></p>

<p>Il suffit alors de modifier le fichier <code>default.properties</code> en y renseignant les variables <code>HADOOP_HOME</code> et <code>oozie.sharelib.path</code> avec les bonnes valeurs.</p>

<h1>Fonctionnement</h1>

<p>Une fois la partie prérequis réalisée, il ne reste plus qu&#8217;à générer :</p>

<ul>
<li>le jar si le besoin est d&#8217;utiliser Hadoop-bootstrap dans un contexte de tests d&#8217;intégration</li>
<li>le tar.gz si le besoin est d&#8217;utiliser Hadoop-bootstrap dans son mode <em>standalone</em></li>
</ul>


<p>Pour ce faire, exécuter simplement la commande :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mvn install
</span></code></pre></td></tr></table></div></figure>


<h2>Pour un fonctionnement en test d&#8217;intégration ou unitaire</h2>

<p>Pour ce mode, il est possible de faire de 2 manières différentes :</p>

<ul>
<li>démarrer les composants nécessaires manuellement</li>
<li>utiliser un wrapper qui prend en paramètre les composants à démarrer</li>
</ul>


<p>Attention cependant, dans les 2 cas, il est faut démarrer/arrêter les composants dans le bon ordre&hellip;</p>

<h3>Zookeeper</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="n">Bootstrap</span> <span class="n">zookeeper</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">zookeeper</span> <span class="o">=</span> <span class="n">ZookeeperBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">zookeeper</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ou</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">HadoopBootstrap</span> <span class="n">hadoopBootstrap</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HadoopBootstrap</span><span class="o">(</span><span class="n">Component</span><span class="o">.</span><span class="na">ZOOKEEPER</span><span class="o">);</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">startAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">stopAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>HDFS</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">private</span> <span class="kd">static</span> <span class="n">Bootstrap</span> <span class="n">hdfs</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hdfs</span> <span class="o">=</span> <span class="n">HdfsBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hdfs</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ou</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">HadoopBootstrap</span> <span class="n">hadoopBootstrap</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HadoopBootstrap</span><span class="o">(</span><span class="n">Component</span><span class="o">.</span><span class="na">HDFS</span><span class="o">);</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">startAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">stopAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>HBase</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">zookeeper</span><span class="o">;</span>
</span><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">hdfs</span><span class="o">;</span>
</span><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">hbase</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hdfs</span> <span class="o">=</span> <span class="n">HdfsBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'>  <span class="n">zookeeper</span> <span class="o">=</span> <span class="n">ZookeeperBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'>  <span class="n">hbase</span> <span class="o">=</span> <span class="n">HBaseBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hbase</span><span class="o">.</span><span class="na">stop</span><span class="o">()</span>
</span><span class='line'>  <span class="n">zookeeper</span><span class="o">.</span><span class="na">stop</span><span class="o">()</span>
</span><span class='line'>  <span class="n">hdfs</span><span class="o">.</span><span class="na">stop</span><span class="o">()</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ou</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">HadoopBootstrap</span> <span class="n">hadoopBootstrap</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HadoopBootstrap</span><span class="o">(</span><span class="n">Component</span><span class="o">.</span><span class="na">HDFS</span><span class="o">,</span> <span class="n">Component</span><span class="o">.</span><span class="na">ZOOKEEPER</span><span class="o">,</span> <span class="n">Component</span><span class="o">.</span><span class="na">HBASE</span><span class="o">);</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">startAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">stopAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Hive</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">zookeeper</span><span class="o">;</span>
</span><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">hiveMetastore</span><span class="o">;</span>
</span><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">hiveServer2</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">zookeeper</span> <span class="o">=</span> <span class="n">ZookeeperBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'>    <span class="n">hiveMetastore</span> <span class="o">=</span> <span class="n">HiveMetastoreBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'>    <span class="n">hiveServer2</span> <span class="o">=</span> <span class="n">HiveServer2Bootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hiveServer2</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'>    <span class="n">hiveMetastore</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'>    <span class="n">zookeeper</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ou</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">HadoopBootstrap</span> <span class="n">hadoopBootstrap</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HadoopBootstrap</span><span class="o">(</span><span class="n">Component</span><span class="o">.</span><span class="na">ZOOKEEPER</span><span class="o">,</span> <span class="n">Component</span><span class="o">.</span><span class="na">HIVEMETA</span><span class="o">,</span> <span class="n">Component</span><span class="o">.</span><span class="na">HIVESERVER2</span><span class="o">);</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">startAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">stopAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Kafka</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">zookeeper</span><span class="o">;</span>
</span><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">kafka</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">zookeeper</span> <span class="o">=</span> <span class="n">ZookeeperBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'>    <span class="n">kafka</span> <span class="o">=</span> <span class="n">KafkaBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">kafka</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'>    <span class="n">zookeeper</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ou</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">HadoopBootstrap</span> <span class="n">hadoopBootstrap</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HadoopBootstrap</span><span class="o">(</span><span class="n">Component</span><span class="o">.</span><span class="na">ZOOKEEPER</span><span class="o">,</span> <span class="n">Component</span><span class="o">.</span><span class="na">KAFKA</span><span class="o">);</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">startAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">stopAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>SolRCloud</h3>

<p>La difficulté pour intégrer ce composant était que le mode SolR Cloud n&#8217;existait pas. Dans mon contexte d&#8217;utilisation, la cible était SolR Cloud qui impose l&#8217;utilisation de Zookeeper. Concernant l&#8217;interaction d&#8217;un client externe, il doit donc récupérer la configuration de SolR au sein de Zookeeper : le mode de fonctionnement est donc différent d&#8217;un SolR en <em>standalone</em>.</p>

<p>Pour faire fonctionner le mode SolR Cloud, il a fallu interagir directement avec Zookeeper en y écrivant les informations sur la collection cible car le mode embarqué n&#8217;offrait pas les API suffisantes pour créer une collection.</p>

<p>Actuellement, ce mode ne fonctionne qu&#8217;avec une collection qui doit être connue et renseignée préalablement (schema.xml, &hellip;).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">zookeeper</span><span class="o">;</span>
</span><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">solr</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">zookeeper</span> <span class="o">=</span> <span class="n">ZookeeperBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'>    <span class="n">solr</span> <span class="o">=</span> <span class="n">SolrCloudBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">solr</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'>    <span class="n">zookeeper</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ou</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">HadoopBootstrap</span> <span class="n">hadoopBootstrap</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HadoopBootstrap</span><span class="o">(</span><span class="n">Component</span><span class="o">.</span><span class="na">ZOOKEEPER</span><span class="o">,</span> <span class="n">Component</span><span class="o">.</span><span class="na">SOLRCLOUD</span><span class="o">);</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">startAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">stopAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Oozie</h3>

<p>La difficulté pour intégrer ce composant était que <a href="https://github.com/sakserv/hadoop-mini-clusters">Hadoop-mini-clusters</a> ne permettait pas à un client extérieur à la JVM ayant démarré Oozie d&#8217;intéragir avec le serveur.</p>

<p>En outre, pour utiliser les action Oozie tierce, il était nécesssaire de télécharger oozie. J&#8217;ai juste simplifié ce mode en obligeant l&#8217;utilisateur à disposer déjà de oozie sur son poste pour accélérer le mode de fonctionnement.</p>

<p>Il est donc nécessaire de télécharger les <code>sharelib</code> de Oozie qui contiennet les librairies permettant de lancer des actions Hive, Spark, Shell ou autre (en fait, pour être plus précis, les sharelib sont dans la distribution d&#8217;Oozie : on télécharge donc Oozie&hellip;) : <a href="http://s3.amazonaws.com/public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.3.2.0/tars/oozie-4.2.0.2.3.2.0-2950-distro.tar.gz">http://s3.amazonaws.com/public-repo-1.hortonworks.com/HDP/centos6/2.x/updates/2.3.2.0/tars/oozie-4.2.0.2.3.2.0-2950-distro.tar.gz</a></p>

<p>Il suffit ensuite de modifier le fichier <code>default.properties</code> en y renseignant la variable <code>oozie.sharelib.path</code> avec la bonne valeur.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">hdfs</span><span class="o">;</span>
</span><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">Bootstrap</span> <span class="n">oozie</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hdfs</span> <span class="o">=</span> <span class="n">HdfsBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'>    <span class="n">oozie</span> <span class="o">=</span> <span class="n">OozieBootstrap</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">oozie</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'>    <span class="n">hdfs</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ou</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">static</span> <span class="kd">private</span> <span class="n">HadoopBootstrap</span> <span class="n">hadoopBootstrap</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@BeforeClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">setup</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HadoopBootstrap</span><span class="o">(</span><span class="n">Component</span><span class="o">.</span><span class="na">HDFS</span><span class="o">,</span> <span class="n">Component</span><span class="o">.</span><span class="na">OOZIE</span><span class="o">);</span>
</span><span class='line'>  <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">startAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="nd">@AfterClass</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">tearDown</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">BootstrapException</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">hadoopBootstrap</span><span class="o">.</span><span class="na">stopAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Pour un fonctionnement en mode <em>standalone</em></h2>

<p>Pour ce mode de fonctionnement, il suffit de récupérer le tar.gz généré lors de la compilation. Il est <em>autoporteur</em> et il suffit de le décompresser puis de démarrer Hadoop-bootstrap.</p>

<p>Ses fichiers de configuration se trouvent dans le répertoire <code>conf</code>.</p>

<p>Afin de pouvoir choisir les composants à démarrer, il suffit de modifier le contenu du fichier <code>hadoop.properties</code> se trouvant dans le répertoire <code>conf</code>.</p>

<p>Pour démarrer l&#8217;écosystème, il suffit d&#8217;exécuter la commande suivante :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>./bin/hadoop-bootstrap start
</span></code></pre></td></tr></table></div></figure>


<p>Pour arrêter hadoop-bootstrap, exécuter la commande suivante :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>./bin/hadoop-bootstrap stop
</span></code></pre></td></tr></table></div></figure>


<p>Pour démarrer hadoop-bootstrap en mode interactif, exécuter la commande :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>./bin/hadoop-bootstrap console
</span></code></pre></td></tr></table></div></figure>




<div>
<iframe allowfullscreen="" frameborder="0" height="315" src="https://www.youtube.com/embed/ef_9Y7a2ar8" width="560"></iframe></div>


<p>A noter que ces commandes fonctionnent également sous Windows.</p>

<p>Concernant macOS, je n&#8217;ai pas testé mais cela ne devrait pas poser de difficultées.</p>

<h1>Conclusion</h1>

<p><a href="https://github.com/jetoile/hadoop-bootstrap">Hadoop-bootstrap</a> n&#8217;est pas un composant révolutionnaire et ne fait que wrapper ce qui a déjà été fait dans <a href="https://github.com/sakserv/hadoop-mini-clusters">Hadoop-mini-clusters</a>.</p>

<p>Cependant, il est plus simple d&#8217;utilisation car limite plus l&#8217;utilisation des composants.</p>

<p>Il permet, en outre, d&#8217;utiliser l&#8217;écosystème Hadoop en mode <em>standalone</em> (écosystème fonctionnant, bien sûr, en mode dégradé&hellip;) et d&#8217;interagir avec avec des clients externes (par exemple, <code>hdfs dfs</code> fonctionne bien avec le hdfs démarré). Pour plus d&#8217;information, il suffit d&#8217;aller voir la classe <code>ManualIntegrationBootstrapTest</code> dans le package <code>fr.jetoile.sample.integrationtest</code>.</p>

<p>Alors, oui, ce n&#8217;est pas une révolution mais, au moins, ca permettra à l&#8217;utilisateur de ne pas à avoir à se battre avec les conflits de jar que j&#8217;ai pu avec avec SolR et Hadoop&hellip; ;)</p>

<p>Pour plus d&#8217;informations, les <a href="https://github.com/jetoile/hadoop-bootstrap/tree/master/src/test/java/fr/jetoile/sample/component">tests unitaires</a> et les <a href="https://github.com/jetoile/hadoop-bootstrap/blob/master/src/test/java/fr/jetoile/sample/integrationtest/IntegrationBootstrapTest.java">tests d&#8217;<em>intégration</em></a>.</p>

<p>A noter que pour faire fonctionner certains composants, je n&#8217;ai pas fait dans la finesse&hellip; et j&#8217;ai allègrement <em>hacké</em> certaines classes&hellip;</p>

<p>A noter également que j&#8217;ai simplement copier/coller les tests de <a href="https://github.com/sakserv/hadoop-mini-clusters">Hadoop-mini-clusters</a> sauf dans le mode intégration où je les ai un peu modifié pour permettre une connexion <em>remote</em>.</p>

<p>Voilà, ce n&#8217;est pas le plus beau code que j&#8217;ai pu faire, mais j&#8217;espère que ca pourra aider certains et, au pire, n&#8217;hésitez pas à contribuer ou à forker pour en faire ce que vous en voulez ;)</p>

<h2>Limitations connues</h2>

<ul>
<li>phoenix ne fonctionne pas (voir la branche phoenix)</li>
<li>une seule collection possible avec SolR</li>
<li>des optimisations sur Oozie sont possibles (notamment sur la partie téléchargement/décompression)</li>
</ul>



<footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Khanh Maudoux</span></span>

      </p>
      <p class="meta">
      








  



<time datetime="2016-01-18T10:00:00+01:00" pubdate data-updated="true">January 18, 2016</time> in 

<span class="categories">
  
    <a class='category' href='/blog/categories/hadoop/'>Hadoop</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="https://blog.jetoile.fr/2016/01/hadoop-ecosysteme-bootstrap.html" data-via="jetoile" data-counturl="https://blog.jetoile.fr/2016/01/hadoop-ecosysteme-bootstrap.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
</footer>

<!--
<section>
<h1>Comments</h1>
<script>
var idcomments_acct = '1a2a89d3b135fb1f774e938fd286d920';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>

</section>
-->


  <section>
    <h1>Comments</h1>

    
<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jetoile'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

<!--
<div id="disqus_thread"></div>
  

<script type="text/javascript">
      var disqus_shortname = 'jetoile';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://blog.jetoile.fr/2016/01/hadoop-ecosysteme-bootstrap.html';
        var disqus_url = 'https://blog.jetoile.fr/2016/01/hadoop-ecosysteme-bootstrap.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

  </section>


      </div>
    </div>
  </div>
-->


</article>

<hr class="divider-short"/>

<div class="archive-link">
  <div class="container">
    <div class="row">
      <a class="pull-center" href="/" title="Home">Home</a>
    </div>
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        
          <a class="pull-left" href="/2016/01/loggons-beaucoup-mais-loggons-bien.html" title="Previous Post: Loggons beaucoup mais loggons bien...">&laquo; Previous: Loggons beaucoup mais loggons bien...</a>
        

        
          <a class="pull-right" href="/2016/04/hadoop-unit.html" title="Next Post: Hadoop Unit">Next: Hadoop Unit &raquo;</a>
        
      </div>
    </div>
  </div>
</div>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<script type="text/javascript">
  window.___gcfg = {lang: 'fr'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div id='footer-shadow'></div>
<!--//please give me a respect for keep these credits line -->
<div class='credits'>
<div align='center'>

<table style="border:none;border-spacing: 20px;border-collapse: separate;">
<tr style="border:none">
<td style="border:none">
<a href="http://twitter.com/jetoile" class="twitter-follow-button" data-show-count="false" data-lang="fr">Follow @jetoile</a>
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
</td>
<td style="border:none">
<a href="https://plus.google.com/u/0/114765959876500830478/posts?prsrc=3" style="text-decoration: none; color: #333;"><div style="display: inline-block;"><span style="float: left; font: bold 13px/16px arial,sans-serif; margin-right: 4px; margin-top: 7px;">khanh</span><span style="float: left; font: 13px/16px arial,sans-serif; margin-right: 11px; margin-top: 7px;">on</span><div style="float: left;"><img src="/images/gplus-32.png" width="32" height="32" style="border: 0;"/></div><div style="clear: both"></div></div></a>
</td>
<td style="border:none">
<a href="http://fr.linkedin.com/pub/khanh-tuong-maudoux/19/92b/11b"><img src="/images/btn_profile_bluetxt_8
0x15_fr_FR.png" width="80" height="15" border="0" alt="Voir le profil de Khanh Tuong Maudoux sur LinkedIn" /></a>
</td>
</tr>
</table>


<img alt='Jetoile' height='50' src='/images/logoJetoile_v51.png' style='border-width:0; vertical-align: middle' width='180'/>
<p>&#169; 2011 <a href='http://blog.jetoile.fr/'>Je toile ou j* au choix...</a> - Khanh Maudoux</p>
<a href='http://creativecommons.org/licenses/by/4.0/' rel='license'><img alt='Licence Creative Commons' src='/images/creative_common88x31.png' style='border-width:0'/></a> Cette œuvre de <a href='http://blog.jetoile.fr' property='cc:attributionName' rel='cc:attributionURL' xmlns:cc='http://creativecommons.org/ns#'>http://blog.jetoile.fr</a> est mise à disposition selon les termes de la <a href='http://creativecommons.org/licenses/by/4.0/' rel='license'>licence Creative Commons Attribution 4.0 International</a>.
<!--img alt='Creative Commons License' src='http://i.creativecommons.org/l/by/2.0/fr/88x31.png' style='border-width:0; vertical-align: middle;'/> <small>Sauf mention contraire, le contenu de ce blog est mis à disposition selon les termes de la licence <a href='http://creativecommons.org/licenses/by/2.0/fr/'>Creative Commons Attribution 2.0 License</a>.</small-->
<br/>
<small>Powered by <a href="http://octopress.org">Octopress</a><br/>
</small>
</div>
</div>


    </div>
  </div>
</footer>

  </body>
</html>
