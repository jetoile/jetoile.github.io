
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>

<script type="text/javascript">
    var host = "blog.jetoile.fr";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
        window.location.protocol = "https";
</script>

  <meta charset="utf-8">
  <title>FluentLenium Et Cucumber JVM... Complément Et Precision - Jetoile</title>
  <meta name="author" content="Khanh Maudoux">

  <meta content='blog sur Java jee' name='description'/>
  <meta content='jee, java, cloud, nosql' name='keywords'/>
  <meta content='index, follow' name='robots'/>
  <link href='url' rel='canonical'/>

  
  <meta name="description" content="FluentLenium Et Cucumber JVM... Complément Et Precision April 11, 2013 Dans mon article précédent, j&#8217;avais tenté d&#8217;expliquer comment il &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://blog.jetoile.fr/2013/04/fluentlenium-et-cucumber-jvm-complement.html">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Jetoile" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>

  <script src="/javascripts/monthly_archive.js"></script>
  <!-- font-family: 'Knewave', cursive; -->
<link href='http://fonts.googleapis.com/css?family=Knewave' rel='stylesheet' type='text/css'>
<!-- font-family: 'Cantata One', serif; -->
<link href='http://fonts.googleapis.com/css?family=Cantata+One' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11955429-1']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_setDomainName','github.io']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

  <body>
    <a href="/" class="home-icon">
      <img src="/images/home.png"/>
    </a>

    <article role="article" class="full-single-article">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <h1>FluentLenium Et Cucumber JVM... Complément Et Precision</h1>
        <div class="meta">
          








  



<time datetime="2013-04-11T21:38:54+02:00" pubdate data-updated="true">April 11, 2013</time>  
        </div>
        <p><img src="http://4.bp.blogspot.com/-R3ORi15Ei3Y/UTmwoq5A2II/AAAAAAAAA3o/uaIMSSZlq38/s1600/logo.png" alt="left-small" /></p>

<p>Dans mon article précédent, j&#8217;avais tenté d&#8217;expliquer comment il était possible d&#8217;intégrer les frameworks <a href="https://github.com/cucumber/cucumber-jvm">Cucumber JVM</a> et <a href="http://docs.seleniumhq.org/">Selenium</a> au travers de <a href="https://github.com/FluentLenium/FluentLenium">FluentLenium</a>.</p>

<p>En effet, pour rappel, FluentLenium permettait d&#8217;abstraire Selenium en lui offrant une API plus <em>fluent</em> mais également en lui apportant nativement ce qu&#8217;il préconise, à savoir le <a href="http://docs.seleniumhq.org/docs/06_test_design_considerations.jsp#page-object-design-pattern">Page Object Design Pattern</a>.</p>

<p>Pour ce faire, j&#8217;avais proposé d&#8217;utiliser la délégation de l&#8217;initialisation de FluentLenium à une classe tierce injectée via le mécanisme d&#8217;injection de Cucumber JVM.</p>

<p>Cependant, suite à discussion avec la créatrice de FluentLenium (à savoir <a href="https://twitter.com/mathildelemee">Mathilde</a>), on s&#8217;est rendu compte que l&#8217;axe utilisé était légèrement biaisé (même s&#8217;il fonctionnait&hellip;).</p>

<p>Cet article revient donc sur ce point en proposant une solution plus simple mais présentera également comment il est possible de tester le scénario Cucumber avec différents navigateurs et il y aura un petit mot sur l&#8217;utilisation de navigateurs déportés (via les RemoteWebDriver de Selenium 2).</p>

<p>Pour ce faire, il sera découpé en 3 parties qui couvriront des usecases différents se traduisant donc par des implémentations différentes :</p>

<ul>
<li>cas de tests pour un site simple,</li>
<li>cas de tests pour un site complet,</li>
<li>cas de tests multi-navigateurs pour un site complet.</li>
</ul>


<p>A noter que je ne reviendrai pas sur les principes des différents frameworks/concepts mais juste sur comment il est possible d&#8217;implémenter ces différents usecases.</p>

<p>A noter également que l&#8217;article précédent aurait pu être modifié mais qu&#8217;en raison du nombre important de changements, il était plus simple d&#8217;en initier un autre&hellip;</p>

<!-- more -->


<h1>Cas de tests pour un site simple</h1>

<h2>Présentation et proposition d&#8217;implémentation</h2>

<p>Ce premier cas d&#8217;usage couvre le cas : &ldquo;j&#8217;ai un site que je veux tester avec Cucumber JVM et l&#8217;ensemble des steps peut être réuni dans une seule et même classe.&rdquo;</p>

<p>Bon je vois déjà la levée de bouclier : pourquoi réunir toutes les steps dans une seule et même classe. En fait, la raison du pourquoi sera expliquée un peu plus tard dans le paragraphe <em>Limites</em> de ce chapitre donc patience&hellip; ;&ndash;)</p>

<p>Contrairement à la façon que j&#8217;avais présentée dans mon article précédent, il n&#8217;est pas obligatoire de déléguer la déclaration des pages <code>FluentPage</code> à une autre classe étendant <code>FluentTest</code>. En fait, il suffit juste de faire étendre la classe contenant les steps cucumber de <code>FluentAdapter</code>, d&#8217;y déclarer les pages et d&#8217;appeler dans la méthode annotée par @Before (celui de Cucumber JVM bien sûr) les méthode d&#8217;initialisation du contexte de FluentLenium.</p>

<p>Pour rappel, cette initialisation instancie le WebDriver utilisé par Selenium 2 mais également les pages (annotées par l&#8217;annotation <code>@Page</code>) présentes dans la classe courante (ou ses parentes) qui doit, au minimum, étendre de <code>FluentAdapter</code>. Cela se fait au travers des méthodes <code>initFluent()</code> et <code>initTest()</code>.</p>

<p>Le code est donc extrêmement simple puisqu&#8217;il suffit de faire quelque chose du style :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">cucumber.api.java.After</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cucumber.api.java.Before</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cucumber.api.java.en.Given</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cucumber.api.java.en.Then</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">cucumber.api.java.en.When</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.fluentlenium.core.FluentAdapter</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.fluentlenium.core.annotation.Page</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.htmlunit.HtmlUnitDriver</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">fest</span><span class="o">.</span><span class="na">assertions</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleStep</span> <span class="kd">extends</span> <span class="n">FluentAdapter</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'> <span class="nd">@Page</span>
</span><span class='line'> <span class="n">BingPage</span> <span class="n">page</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'> <span class="nd">@Before</span>
</span><span class='line'> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">before</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">this</span><span class="o">.</span><span class="na">initFluent</span><span class="o">(</span><span class="k">new</span> <span class="n">HtmlUnitDriver</span><span class="o">());</span>
</span><span class='line'>  <span class="k">this</span><span class="o">.</span><span class="na">initTest</span><span class="o">();</span>
</span><span class='line'> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'> <span class="nd">@Given</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;j accede a bing&quot;</span><span class="o">)</span>
</span><span class='line'> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">step1</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">goTo</span><span class="o">(</span><span class="n">page</span><span class="o">);</span>
</span><span class='line'> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'> <span class="nd">@When</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;je recherche ([^ ]*) &quot;</span><span class="o">)</span>
</span><span class='line'> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">step2</span><span class="o">(</span><span class="n">String</span> <span class="n">keyword</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">fill</span><span class="o">(</span><span class="s">&quot;#sb_form_q&quot;</span><span class="o">).</span><span class="na">with</span><span class="o">(</span><span class="n">keyword</span><span class="o">);</span>
</span><span class='line'>  <span class="n">submit</span><span class="o">(</span><span class="s">&quot;#sb_form_go&quot;</span><span class="o">);</span>
</span><span class='line'> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'> <span class="nd">@Then</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;le titre est ([^ ]*) &quot;</span><span class="o">)</span>
</span><span class='line'> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">step3</span><span class="o">(</span><span class="n">String</span> <span class="n">keyword</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">assertThat</span><span class="o">(</span><span class="n">title</span><span class="o">()).</span><span class="na">contains</span><span class="o">(</span><span class="n">keyword</span><span class="o">);</span>
</span><span class='line'> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'> <span class="nd">@After</span>
</span><span class='line'> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">after</span><span class="o">(){</span>
</span><span class='line'>  <span class="k">this</span><span class="o">.</span><span class="na">quit</span><span class="o">();</span>
</span><span class='line'> <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>où BingPage est :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">org.fluentlenium.core.FluentPage</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BingPage</span> <span class="kd">extends</span> <span class="n">FluentPage</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'> <span class="nd">@Override</span>
</span><span class='line'> <span class="kd">public</span> <span class="n">String</span> <span class="nf">getUrl</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="s">&quot;http://www.bing.com&quot;</span><span class="o">;</span>
</span><span class='line'> <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>et la feature, la suivante :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>Feature: basic
</span><span class='line'>
</span><span class='line'>  Scenario: scenar1
</span><span class='line'>    Given j accede a bing
</span><span class='line'>    When je recherche toto
</span><span class='line'>    Then le titre est toto
</span></code></pre></td></tr></table></div></figure>


<p>Il est intéressant de remarquer la simplicité de la chose (et rien à voir avec l&#8217;implémentation que j&#8217;avais proposé précédemment!).</p>

<p>A part cela, peu de choses à ajouter : le code parle de lui même&hellip;</p>

<h2>Limites</h2>

<p>On vient de voir comme il était simple de faire cohabiter FluentLenium et Cucumber JVM.</p>

<p>Bien sûr, il y a un mais&hellip; (ça serait trop simple sinon) : comme on peut le constater, actuellement, toutes les steps se trouvent être dans la même classe. Cependant, dans le cas d&#8217;un site web un peu plus complexe, il est courant et même encouragé de séparer les steps dans différentes classes.</p>

<p>Dans l&#8217;implémentation précédente, l&#8217;annotation <code>@Before</code> a été utilisée pour initialiser le contexte (et plus particulièrement le webDriver et les pages pour ensuite injecter le webDriver dans ces dernières).</p>

<p>Cependant, dans le cas où les steps se trouvent être dans plusieurs classes, cela pose potentiellement un problème.</p>

<p>En effet, Cucumber JVM instancie la classe qui contient la définition de la step dès qu&#8217;il en a besoin et appelle la méthode annotée par <code>@Before</code> à l&#8217;instanciation de cette classe. Ainsi, dans notre cas, si les steps s&#8217;étaient trouvées dans deux classes, chacune étendant <code>FluentAdapter</code> et appelant <code>initFluent()</code> et <code>initTest()</code> dans la méthode annotée par @Before, alors cette instanciation aurait été faite deux fois et non une seule fois comme on aurait pu s&#8217;y attendre pour un même scénario donné&hellip;</p>

<p>Pire, les pages déclarées dans les classes n&#8217;auraient pas eu la même instance du webDriver et elles ne se seraient pas vu l&#8217;une l&#8217;autre&hellip;</p>

<p>Pas glop tout ça&hellip; :&lsquo;(</p>

<p>Ainsi, l&#8217;implémentation précédente fonctionne pour des cas &ldquo;simples&rdquo; mais si la partie test d’acceptante/intégration avait été plus complexe, alors cela aurait empêché la réutilisation et le découplage.</p>

<h1>Cas de tests pour un site complet</h1>

<h2>Présentation et proposition d&#8217;implémentation</h2>

<p>Il a été vu dans le paragraphe précédent qu&#8217;il pouvait être utile de disposer de plusieurs classes disposant des implémentations des fixtures.
Cependant, la question principale est de trouver comment il est possible de n&#8217;instancier qu&#8217;une seule fois par scénario le webDriver et de l&#8217;injecter dans des instances de pages propres au scénario.</p>

<p>La proposition présentée dans l&#8217;article précédent (modulo qu&#8217;il ne faut pas étendre de <code>FluentTest</code> mais de <code>FluentAdapter</code>) reste viable, mais il y a plus simple.</p>

<p>En effet, dans la proposition faite précédemment, la classe <code>FluentTestDelegator</code> avait à sa charge, à la fois la déclaration des pages, et l&#8217;instanciation et l&#8217;initialisation du contexte de FluentLenium. Pour rappel, cette instanciation/initialisation était réalisée par <a href="http://picocontainer.codehaus.org/">Pico Container</a> lors de l&#8217;injection de l&#8217;instance de cette classe dans la classe contenant les fixtures.</p>

<p>En fait, il est plus propre, d&#8217;un point de vue séparation des concepts, de laisser à cette classe le soin de proposer les fixtures d&#8217;initialisation du webDriver tout en séparant la déclaration des pages.</p>

<p>Cela peut être réalisé en créant une classe (<code>FluentPageInjector</code>) étendant de <code>FluentAdapter</code> qui définit les pages et de la faire étendre d&#8217;une classe (<code>FluentLeniumStepInitilizer</code>) qui définit les fixtures d&#8217;instanciation du webDriver.</p>

<p>Cela offre deux avantages : les classes qui définissent les steps de navigation n&#8217;ont qu&#8217;à étendre de <code>FluentPageInjector</code> pour avoir une visibilité sur les pages (tout en continuant d&#8217;injecter via pico l&#8217;instance de <code>FluentLeniumStepInitilizer</code>) et il devient alors possible de variabiliser le webDriver à utiliser.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>Feature: browser
</span><span class='line'>
</span><span class='line'>  Scenario: navigation version firefox
</span><span class='line'>    Given I connect on url http://localhost:8080 with firefox
</span><span class='line'>    Given j accede a la homePage
</span><span class='line'>    And je suis sur homePage
</span><span class='line'>    When je submit
</span><span class='line'>    Then je suis sur la page result
</span><span class='line'>    And driver is closed
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  Scenario: navigation version chrome
</span><span class='line'>    Given I connect on url http://localhost:8080 with chrome with parameters webdriver.chrome.driver:/opt/chromedriver/chromedriver
</span><span class='line'>    Given j accede a la homePage
</span><span class='line'>    And je suis sur homePage
</span><span class='line'>    When je submit
</span><span class='line'>    Then je suis sur la page result
</span><span class='line'>    And driver is closed
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  Scenario: navigation version phantomjs
</span><span class='line'>    Given I connect on url http://localhost:8080 with phantomjs with parameters phantomjs.binary.path:/opt/phantomjs-1.9.0-linux-x86_64/bin/phantomjs
</span><span class='line'>    Given j accede a la homePage
</span><span class='line'>    And je suis sur homePage
</span><span class='line'>    When je submit
</span><span class='line'>    Then je suis sur la page result
</span><span class='line'>    And driver is closed
</span></code></pre></td></tr></table></div></figure>


<br/>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">step</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.fluentlenium.core.FluentAdapter</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.fluentlenium.core.annotation.Page</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">page.HomePage</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">page.ResultPage</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FluentPageInjector</span> <span class="kd">extends</span> <span class="n">FluentAdapter</span> <span class="o">{</span>
</span><span class='line'>    <span class="nd">@Page</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="n">HomePage</span> <span class="n">homePage</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Page</span>
</span><span class='line'>    <span class="kd">protected</span> <span class="n">ResultPage</span> <span class="n">resultPage</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>On remarque, comme dit plus haut, que cette classe n&#8217;a qu&#8217;un seul rôle qui est de déclarer les pages tout en étendant de <code>FluentAdapter</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HomePageStep</span> <span class="kd">extends</span> <span class="n">FluentPageInjector</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>     <span class="kd">public</span> <span class="nf">HomePageStep</span><span class="o">(</span><span class="n">FluentLeniumStepInitilizer</span> <span class="n">delegator</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">this</span><span class="o">.</span><span class="na">homePage</span> <span class="o">=</span> <span class="n">delegator</span><span class="o">.</span><span class="na">homePage</span><span class="o">;</span>
</span><span class='line'>      <span class="k">this</span><span class="o">.</span><span class="na">resultPage</span> <span class="o">=</span> <span class="n">delegator</span><span class="o">.</span><span class="na">resultPage</span><span class="o">;</span>
</span><span class='line'>     <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>     <span class="nd">@Given</span><span class="o">(</span><span class="s">&quot;^j accede a la homePage$&quot;</span><span class="o">)</span>
</span><span class='line'>     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">j_accede_a_homePage</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">goTo</span><span class="o">(</span><span class="n">homePage</span><span class="o">);</span>
</span><span class='line'>     <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>     <span class="nd">@Given</span><span class="o">(</span><span class="s">&quot;^je suis sur homePage$&quot;</span><span class="o">)</span>
</span><span class='line'>     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">je_suis_sur_homePage</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">homePage</span><span class="o">.</span><span class="na">isAt</span><span class="o">();</span>
</span><span class='line'>     <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>     <span class="nd">@When</span><span class="o">(</span><span class="s">&quot;^je submit$&quot;</span><span class="o">)</span>
</span><span class='line'>     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">je_submit</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
</span><span class='line'>      <span class="n">homePage</span><span class="o">.</span><span class="na">submit</span><span class="o">();</span>
</span><span class='line'>     <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>




<br/>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ResultPageStep</span> <span class="kd">extends</span> <span class="n">FluentPageInjector</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">ResultPageStep</span><span class="o">(</span><span class="n">FluentLeniumStepInitilizer</span> <span class="n">delegator</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">resultPage</span> <span class="o">=</span> <span class="n">delegator</span><span class="o">.</span><span class="na">resultPage</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@When</span><span class="o">(</span><span class="s">&quot;^je suis sur la page result$&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">je_suis_sur_la_page_result</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Throwable</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">resultPage</span><span class="o">.</span><span class="na">isAt</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ces classes correspondent aux classes qui définissent les fixtures. Elles étendent de <code>FluentPageInjector</code> de façon à pouvoir bénéficier de la visibilité sur les pages. Par contre, il est intéressant de constater que, dans son constructeur, la classe <code>FluentLeniumStepInitializer</code> est injecté via Pico Container. Cela permet d&#8217;affecter la valeur des pages.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FluentLeniumStepInitilizer</span> <span class="kd">extends</span> <span class="n">FluentPageInjector</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Given</span><span class="o">(</span><span class="s">&quot;^I connect on url ([^ ]*) with ([^ ]*) with parameters ([^ ]*)$&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">browser_connect</span><span class="o">(</span><span class="n">String</span> <span class="n">host</span><span class="o">,</span> <span class="n">String</span> <span class="n">browser</span><span class="o">,</span> <span class="n">String</span> <span class="n">parameters</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">init</span><span class="o">(</span><span class="n">host</span><span class="o">,</span> <span class="n">browser</span><span class="o">,</span> <span class="n">parameters</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@Then</span><span class="o">(</span><span class="s">&quot;^drivers are closed&quot;</span><span class="o">)</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">quit</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@After</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">afterClose</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">quit</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="n">String</span> <span class="n">host</span><span class="o">,</span> <span class="n">String</span> <span class="n">browserName</span><span class="o">,</span> <span class="n">String</span> <span class="n">parametersLine</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Browser</span> <span class="n">browser</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">DesiredCapabilities</span> <span class="n">capabilities</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DesiredCapabilities</span><span class="o">();</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">String</span><span class="o">[]</span> <span class="n">parameters</span> <span class="o">=</span> <span class="n">parametersLine</span><span class="o">.</span><span class="na">slip</span><span class="o">(</span><span class="s">&quot;;&quot;</span><span class="o">);</span>
</span><span class='line'>        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">parameter</span> <span class="o">:</span> <span class="n">parameters</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="o">(!</span><span class="n">parameter</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">String</span><span class="o">[]</span> <span class="n">key_value</span> <span class="o">=</span> <span class="n">parameter</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;:&quot;</span><span class="o">);</span>
</span><span class='line'>                <span class="n">capabilities</span><span class="o">.</span><span class="na">setCapability</span><span class="o">(</span><span class="n">key_value</span><span class="o">[</span><span class="mi">0</span><span class="o">],</span> <span class="n">key_value</span><span class="o">[</span><span class="mi">1</span><span class="o">]);</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">browser</span> <span class="o">=</span> <span class="n">Browser</span><span class="o">.</span><span class="na">getBrowser</span><span class="o">(</span><span class="n">browserLine</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
</span><span class='line'>        <span class="n">capabilities</span><span class="o">.</span><span class="na">setBrowserName</span><span class="o">(</span><span class="n">browser</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">initWebDriver</span><span class="o">(</span><span class="n">host</span><span class="o">,</span> <span class="n">browserHost</span><span class="o">,</span> <span class="n">browser</span><span class="o">,</span> <span class="n">capabilities</span><span class="o">);</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">initWebDriver</span><span class="o">(</span><span class="n">String</span> <span class="n">host</span><span class="o">,</span> <span class="n">String</span> <span class="n">browserHost</span><span class="o">,</span> <span class="n">Browser</span> <span class="n">browser</span><span class="o">,</span> <span class="n">DesiredCapabilities</span> <span class="n">capabilities</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="n">Fluent</span> <span class="n">fluent</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="n">WebDriver</span> <span class="n">driver</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="o">(</span><span class="n">browser</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">driver</span> <span class="o">=</span> <span class="n">BrowserMapper</span><span class="o">.</span><span class="na">getDriver</span><span class="o">(</span><span class="n">browser</span><span class="o">,</span> <span class="n">capabilities</span><span class="o">);</span>
</span><span class='line'>            <span class="n">fluent</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">initFluent</span><span class="o">(</span><span class="n">driver</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">fluent</span><span class="o">.</span><span class="na">withDefaultUrl</span><span class="o">(</span><span class="n">host</span><span class="o">);</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">initTest</span><span class="o">();</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Cette classe étend par transitivité <code>FluentAdapter</code> et dispose donc de la visibilité sur les méthodes d&#8217;initialisation de <code>FluentLenium</code>. En outre, en étendant <code>FluentPageInjector</code> (qui étend de <code>FluentAdapter</code>), cela lui permet, à l&#8217;appel de <code>initTest()</code>, d&#8217;initialiser les pages.
Concernant l&#8217;initialisation des webDriver, cela est fait au niveau de la classe <code>BrowserMapper</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Browser</span> <span class="o">{</span>
</span><span class='line'>    <span class="n">HTMLUNIT</span><span class="o">(</span><span class="s">&quot;default&quot;</span><span class="o">),</span>
</span><span class='line'>    <span class="n">FIREFOX</span><span class="o">(</span><span class="s">&quot;firefox&quot;</span><span class="o">),</span>
</span><span class='line'>    <span class="n">CHROME</span><span class="o">(</span><span class="s">&quot;chrome&quot;</span><span class="o">),</span>
</span><span class='line'>    <span class="n">PHANTOMJS</span><span class="o">(</span><span class="s">&quot;phantomjs&quot;</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">Browser</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Browser</span> <span class="nf">getBrowser</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">for</span> <span class="o">(</span><span class="n">Browser</span> <span class="n">browser</span> <span class="o">:</span> <span class="n">values</span><span class="o">())</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="o">(</span><span class="n">browser</span><span class="o">.</span><span class="na">getName</span><span class="o">().</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">name</span><span class="o">))</span> <span class="o">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">browser</span><span class="o">;</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">HTMLUNIT</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<br/>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.Capabilities</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.WebDriver</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.chrome.ChromeDriver</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.firefox.FirefoxDriver</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.htmlunit.HtmlUnitDriver</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.phantomjs.PhantomJSDriver</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BrowserMapper</span> <span class="o">{</span>
</span><span class='line'> <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'> <span class="kd">private</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">Browser</span><span class="o">,</span> <span class="n">WebDriverLazyLoader</span><span class="o">&gt;</span> <span class="n">browserMapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">Browser</span><span class="o">,</span> <span class="n">WebDriverLazyLoader</span><span class="o">&gt;();</span>
</span><span class='line'>
</span><span class='line'> <span class="kd">static</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">browserMapper</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Browser</span><span class="o">.</span><span class="na">CHROME</span><span class="o">,</span> <span class="k">new</span> <span class="n">WebDriverLazyLoader</span><span class="o">(</span><span class="n">ChromeDriver</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
</span><span class='line'>  <span class="n">browserMapper</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Browser</span><span class="o">.</span><span class="na">FIREFOX</span><span class="o">,</span> <span class="k">new</span> <span class="n">WebDriverLazyLoader</span><span class="o">(</span><span class="n">FirefoxDriver</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
</span><span class='line'>  <span class="n">browserMapper</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Browser</span><span class="o">.</span><span class="na">HTMLUNIT</span><span class="o">,</span> <span class="k">new</span> <span class="n">WebDriverLazyLoader</span><span class="o">(</span><span class="n">HtmlUnitDriver</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
</span><span class='line'>  <span class="n">browserMapper</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">Browser</span><span class="o">.</span><span class="na">PHANTOMJS</span><span class="o">,</span> <span class="k">new</span> <span class="n">WebDriverLazyLoader</span><span class="o">(</span><span class="n">PhantomJSDriver</span><span class="o">.</span><span class="na">class</span><span class="o">));</span>
</span><span class='line'> <span class="o">}</span>
</span><span class='line'>
</span><span class='line'> <span class="kd">public</span> <span class="kd">static</span> <span class="n">WebDriver</span> <span class="nf">getDriver</span><span class="o">(</span><span class="n">Browser</span> <span class="n">browser</span><span class="o">,</span> <span class="n">Capabilities</span> <span class="n">capabilities</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>  <span class="n">WebDriverLazyLoader</span> <span class="n">webDriverLazyLoader</span> <span class="o">=</span> <span class="n">browserMapper</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">browser</span><span class="o">);</span>
</span><span class='line'>  <span class="k">if</span> <span class="o">(</span><span class="n">webDriverLazyLoader</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">if</span> <span class="o">(</span><span class="n">browser</span> <span class="o">==</span> <span class="n">Browser</span><span class="o">.</span><span class="na">PHANTOMJS</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">webDriverLazyLoader</span><span class="o">.</span><span class="na">getWebDriverClass</span><span class="o">(</span><span class="n">capabilities</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">browser</span> <span class="o">==</span> <span class="n">Browser</span><span class="o">.</span><span class="na">CHROME</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>                <span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s">&quot;webdriver.chrome.driver&quot;</span><span class="o">,</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">capabilities</span><span class="o">.</span><span class="na">getCapability</span><span class="o">(</span><span class="s">&quot;webdriver.chrome.driver&quot;</span><span class="o">));</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">webDriverLazyLoader</span><span class="o">.</span><span class="na">getWebDriverClass</span><span class="o">(</span><span class="n">capabilities</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">webDriverLazyLoader</span><span class="o">.</span><span class="na">getWebDriverClass</span><span class="o">();</span>
</span><span class='line'>            <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">browserMapper</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">Browser</span><span class="o">.</span><span class="na">HTMLUNIT</span><span class="o">).</span><span class="na">getWebDriverClass</span><span class="o">();</span>
</span><span class='line'> <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Cette classe permet de faire le pont avec les webDriver qu&#8217;il est possible d&#8217;utiliser. Cependant, la petite astuce consiste à instancier de manière &ldquo;Lazy&rdquo; ces derniers.</p>

<p>En effet, appeler le constructeur d&#8217;un webDriver l&#8217;instancie mais le démarre également (ie. que la fenêtre du navigateur s&#8217;ouvre réellement). Du coup, la petite classe présentée ci-dessous a été utilisée.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.Capabilities</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.openqa.selenium.WebDriver</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">class</span> <span class="nc">WebDriverLazyLoader</span> <span class="o">{</span>
</span><span class='line'>    <span class="kd">private</span> <span class="n">Class</span> <span class="n">webDriverClass</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="nf">WebDriverLazyLoader</span><span class="o">(</span><span class="n">Class</span> <span class="n">webDriverClass</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">this</span><span class="o">.</span><span class="na">webDriverClass</span> <span class="o">=</span> <span class="n">webDriverClass</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">WebDriver</span> <span class="nf">getWebDriverClass</span><span class="o">()</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="o">(</span><span class="n">WebDriver</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">webDriverClass</span><span class="o">.</span><span class="na">newInstance</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ReflectiveOperationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="n">WebDriver</span> <span class="nf">getWebDriverClass</span><span class="o">(</span><span class="n">Capabilities</span> <span class="n">capabilities</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="o">(</span><span class="n">WebDriver</span><span class="o">)</span><span class="k">this</span><span class="o">.</span><span class="na">webDriverClass</span><span class="o">.</span><span class="na">getConstructor</span><span class="o">(</span><span class="n">Capabilities</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">newInstance</span><span class="o">(</span><span class="n">capabilities</span><span class="o">);</span>
</span><span class='line'>        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ReflectiveOperationException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Limites</h2>

<p>Comme on a pu le voir dans ce chapitre, il est aisé de partager les fixtures Cucumber JVM dans des classes différentes tout en bénéficiant de FluentLenium.</p>

<p>Cependant, pour certains besoins, il peut être utile de vouloir lancer les tests d&#8217;acceptance/intégration sur différents navigateurs.</p>

<p>Bien sûr, chaque step pourrait boucler sur l&#8217;ensemble des navigateurs sur lesquels les tests doivent être exécutés, mais cela induirait des problématiques d&#8217;entrelacement des actions et donc soulèverait des problématiques comme la gestion d&#8217;un contexte par webDriver, l&#8217;accès à un rapport &ldquo;illisible&rdquo; ou un manque de contrôle sur les préconditions du test qui sont, généralement, lié au scénario et non à une Step.</p>

<p>Le chapitre suivant tentera de répondre à cette problématique en proposant un moyen de &ldquo;boucler&rdquo; sur le scénario avec différents navigateurs.</p>

<h1>Cas de tests multi-navigateurs pour un site complet</h1>

<h2>Présentation et proposition d&#8217;implémentation</h2>

<p>Il a été vu dans le chapitre précédent comment il était possible d&#8217;exécuter des tests d&#8217;acceptances/intégration sur un navigateur donné.</p>

<p>Ce chapitre présentera, pour sa part, une façon de les lancer sur différents navigateurs sans avoir à faire de copier/coller ;&ndash;).</p>

<p>En fait, Cucumber JVM permet nativement de boucler sur un scénario en utilisant différents paramètres. Cela se fait par le mécanisme de <code>scenario outline</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>Feature: multibrowser
</span><span class='line'>
</span><span class='line'>  Scenario Outline: multi browser navigation version 1:
</span><span class='line'>    Given I connect on url http://localhost:8080 with &lt;browser&gt; with parameters &lt;parameters&gt;
</span><span class='line'>    Given j accede a la homePage
</span><span class='line'>    And je suis sur homePage
</span><span class='line'>    When je submit
</span><span class='line'>    Then je suis sur la page result
</span><span class='line'>    And driver is closed
</span><span class='line'>  Examples:
</span><span class='line'>    | browser | parameters                                             |
</span><span class='line'>    | firefox |                                                        |
</span><span class='line'>    | default |                                                        |
</span><span class='line'>    | chrome  | webdriver.chrome.driver:/opt/chromedriver/chromedriver |
</span></code></pre></td></tr></table></div></figure>


<p>Et&hellip; c&#8217;est tout!</p>

<p>Le code n&#8217;a pas à être modifié : Cucumber JVM s&#8217;occupe de tout! ;&ndash;)</p>

<h2>Limites</h2>

<p>On a vu dans le paragraphe précédent comment il était possible d&#8217;exécuter facilement des tests d&#8217;acceptance/intégration en s&#8217;appuyant sur la notion de scénario outline offerte nativement par Cucumber JVM.</p>

<p>Coté limitation, je n&#8217;en vois pas trop&hellip;</p>

<p>Peut être le fait de ne pas instancier le webDriver pour chaque scénario (opération assez coûteuse en temps) mais cela est aisément résolvable en utilisant une sorte de cache de webDriver fonctionnant sur le principe de singleton qui serait réinialisé lors de l&#8217;appel à la step drivers are closed qui serait isolée dans son propre <code>scenario outline</code> :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>  Scenario Outline: browsers are closed:
</span><span class='line'>    Then driver is closed
</span><span class='line'>  Examples:
</span><span class='line'>    | browser   | parameters                                                            |
</span><span class='line'>    | firefox   |                                                                       |
</span><span class='line'>    | default   |                                                                       |
</span><span class='line'>    | phantomjs | phantomjs.binary.path:/opt/phantomjs-1.9.0-linux-x86_64/bin/phantomjs |
</span><span class='line'>    | chrome    | webdriver.chrome.driver:/opt/chromedriver/chromedriver                |
</span></code></pre></td></tr></table></div></figure>


<h1>Conclusion</h1>

<p>Il a été présenté dans cet article comment il était possible d&#8217;implémenter l&#8217;intégration de Cucumber JVM et de Selenium à l&#8217;aide de FluentLenium.</p>

<p>Cet article n&#8217;a, cependant, pas fait mention de l&#8217;exécution des tests sur des navigateurs distants via les <strong>RemoteWebDriver</strong> mais cela est tout à fait possible (même si le code montré ici ne le présente pas) et est même totalement fonctionnel : pour ce faire (code disponible <a href="https://github.com/jetoile/fluentlenium-cucumber/tree/multiNav">ici</a>), il suffit de fournir, entre autre, des paramètres supplémentaires comme l&#8217;url de connexion au hub Selenium et d&#8217;instancier un <code>RemoteWebDriver</code> plutôt que le webDriver.</p>

<p>De même, le code permettant d&#8217;instancier à la mode singleton les webDriver est disponible <a href="https://github.com/jetoile/fluentlenium-cucumber/blob/multiNav/src/test/java/step/FluentLeniumStepInitilizer.java">ici</a> (voir la méthode <code>initCachedWebDriver()</code> de la classe <code>FluentLeniumStepInitilizer</code>).</p>

<p>Enfin, un dernier mot sur la façon dont il est possible d&#8217;exécuter tout ce beau monde (comme ça, je réponds à la remarque très pertinente de <a href="https://twitter.com/josepaumard">José</a> ;&ndash;) ) parce que faire des tests, c&#8217;est bien, les jouer, c&#8217;est mieux!</p>

<p>Il est possible de jouer les tests d&#8217;au moins trois manières distinctes : une orienté &ldquo;vraie vie&rdquo; (ie. utilisable au sein d&#8217;un build maven et donc exécutable via une usine d&#8217;intégration continue) et deux autres plutôt orientés développement.</p>

<p>Ainsi, pour jouer les tests via maven, il suffit de le déclarer dans le <code>pom.xml</code> le plugin failsafe en le branchant sur la &ldquo;bonne phase&rdquo;, à savoir le runner Cucumber JVM :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;plugin&gt;</span>
</span><span class='line'>    <span class="nt">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>    <span class="nt">&lt;executions&gt;</span>
</span><span class='line'>        <span class="nt">&lt;execution&gt;</span>
</span><span class='line'>            <span class="nt">&lt;goals&gt;</span>
</span><span class='line'>                <span class="nt">&lt;goal&gt;</span>integration-test<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>                <span class="nt">&lt;goal&gt;</span>verify<span class="nt">&lt;/goal&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/goals&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/execution&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/executions&gt;</span>
</span><span class='line'>    <span class="nt">&lt;configuration&gt;</span>
</span><span class='line'>        <span class="nt">&lt;includes&gt;</span>
</span><span class='line'>            <span class="nt">&lt;include&gt;</span>**/BasicRunner.java<span class="nt">&lt;/include&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/includes&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/configuration&gt;</span>
</span><span class='line'><span class="nt">&lt;/plugin&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Coté jouabilité des tests sur un environnement de développement  il est possible d&#8217;exécuter le <strong>Runner</strong> Cucumber JVM directement (comme lors de l&#8217;exécution d&#8217;une classe de test unitaire) ou d&#8217;utiliser le plugin Cucumber JVM proposé par notre IDE préféré (pour moi IntelliJ, pour les autres, je ne sais pas&hellip;).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">import</span> <span class="nn">cucumber.api.junit.Cucumber</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">org.junit.runner.RunWith</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@RunWith</span><span class="o">(</span><span class="n">Cucumber</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</span><span class='line'><span class="nd">@Cucumber.Options</span><span class="o">(</span><span class="n">features</span> <span class="o">=</span> <span class="s">&quot;classpath:fr/jetoile/webapp/acceptance&quot;</span><span class="o">,</span> <span class="n">format</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;pretty&quot;</span><span class="o">,</span> <span class="s">&quot;html:target/cucumber&quot;</span><span class="o">,</span> <span class="s">&quot;json:target/cucumber.json&quot;</span><span class="o">})</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RunCucumberFeatures</span> <span class="o">{</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="http://4.bp.blogspot.com/-RGW7oSAChOQ/UWXmqPsYh6I/AAAAAAAAA4Y/cDH-YyVcpgs/s1600/screenshot01.png" alt="medium" /></p>

<br/>


<p><img src="http://3.bp.blogspot.com/-FkF8ZO6r6co/UWXnUNjqjII/AAAAAAAAA4g/obtSC7BS6kI/s1600/screenshot02.png" alt="medium" /></p>

<p>Enfin, pour rappel, mon usecase étant de tester mon application web en boite noire, un prérequis était que mon application web soit démarrée au préalable.</p>

<p>Pour ce faire, le plugin maven Jetty (ou Tomcat au choix) a été utilisé et branché sur la phase de pré-integration.</p>

<p>Lors de l&#8217;exécution des tests en mode développement (ie. en les lançant comme un TU ou à l&#8217;aide du plugin Cucumber JVM via l&#8217;IDE), un profil n&#8217;exécutant pas le plugin failsafe mais uniquement le démarrage du jetty/tomcat embarqué a été utilisé.</p>

<h1>Pour aller plus loin&hellip;</h1>

<ul>
<li>article sur les limitations de Cucumber JVM pour le partage de données entre steps : <a href="http://zsoltfabok.com/blog/2012/09/cucumber-jvm-hooks/">http://zsoltfabok.com/blog/2012/09/cucumber-jvm-hooks/</a></li>
<li>page de fluentLenium : <a href="https://github.com/FluentLenium/FluentLenium">https://github.com/FluentLenium/FluentLenium</a></li>
<li>page des webDriver de Selenium : <a href="http://docs.seleniumhq.org/docs/03_webdriver.jsp">http://docs.seleniumhq.org/docs/03_webdriver.jsp</a></li>
<li>code : <a href="http://github.com/jetoile/fluentlenium-cucumber/">http://github.com/jetoile/fluentlenium-cucumber/</a></li>
</ul>



<footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Khanh Maudoux</span></span>

      </p>
      <p class="meta">
      








  



<time datetime="2013-04-11T21:38:54+02:00" pubdate data-updated="true">April 11, 2013</time> in 

<span class="categories">
  
    <a class='category' href='/blog/categories/fluentlenium/'>fluentlenium</a>, <a class='category' href='/blog/categories/integration-continue/'>intégration continue</a>, <a class='category' href='/blog/categories/java/'>java</a>, <a class='category' href='/blog/categories/maven/'>maven</a>, <a class='category' href='/blog/categories/selenium/'>selenium</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="https://blog.jetoile.fr/2013/04/fluentlenium-et-cucumber-jvm-complement.html" data-via="jetoile" data-counturl="https://blog.jetoile.fr/2013/04/fluentlenium-et-cucumber-jvm-complement.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
</footer>

<!--
<section>
<h1>Comments</h1>
<script>
var idcomments_acct = '1a2a89d3b135fb1f774e938fd286d920';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>

</section>
-->


  <section>
    <h1>Comments</h1>

    
<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jetoile'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

<!--
<div id="disqus_thread"></div>
  

<script type="text/javascript">
      var disqus_shortname = 'jetoile';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://blog.jetoile.fr/2013/04/fluentlenium-et-cucumber-jvm-complement.html';
        var disqus_url = 'https://blog.jetoile.fr/2013/04/fluentlenium-et-cucumber-jvm-complement.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

  </section>


      </div>
    </div>
  </div>
-->


</article>

<hr class="divider-short"/>

<div class="archive-link">
  <div class="container">
    <div class="row">
      <a class="pull-center" href="/" title="Home">Home</a>
    </div>
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        
          <a class="pull-left" href="/2013/03/fluentlenium-et-cucumber-jvm-sont-sur.html" title="Previous Post: FluentLenium et Cucumber JVM sont sur un bateau...">&laquo; Previous: FluentLenium et Cucumber JVM sont sur un bateau...</a>
        

        
          <a class="pull-right" href="/2013/04/industrialiser-la-recolte-de-metriques.html" title="Next Post: Industrialiser la récolte de métriques Web">Next: Industrialiser la récolte de métriques Web &raquo;</a>
        
      </div>
    </div>
  </div>
</div>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<script type="text/javascript">
  window.___gcfg = {lang: 'fr'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div id='footer-shadow'></div>
<!--//please give me a respect for keep these credits line -->
<div class='credits'>
<div align='center'>

<table style="border:none;border-spacing: 20px;border-collapse: separate;">
<tr style="border:none">
<td style="border:none">
<a href="http://twitter.com/jetoile" class="twitter-follow-button" data-show-count="false" data-lang="fr">Follow @jetoile</a>
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
</td>
<td style="border:none">
<a href="https://plus.google.com/u/0/114765959876500830478/posts?prsrc=3" style="text-decoration: none; color: #333;"><div style="display: inline-block;"><span style="float: left; font: bold 13px/16px arial,sans-serif; margin-right: 4px; margin-top: 7px;">khanh</span><span style="float: left; font: 13px/16px arial,sans-serif; margin-right: 11px; margin-top: 7px;">on</span><div style="float: left;"><img src="/images/gplus-32.png" width="32" height="32" style="border: 0;"/></div><div style="clear: both"></div></div></a>
</td>
<td style="border:none">
<a href="http://fr.linkedin.com/pub/khanh-tuong-maudoux/19/92b/11b"><img src="/images/btn_profile_bluetxt_8
0x15_fr_FR.png" width="80" height="15" border="0" alt="Voir le profil de Khanh Tuong Maudoux sur LinkedIn" /></a>
</td>
</tr>
</table>


<img alt='Jetoile' height='50' src='/images/logoJetoile_v51.png' style='border-width:0; vertical-align: middle' width='180'/>
<p>&#169; 2011 <a href='http://blog.jetoile.fr/'>Je toile ou j* au choix...</a> - Khanh Maudoux</p>
<a href='http://creativecommons.org/licenses/by/4.0/' rel='license'><img alt='Licence Creative Commons' src='/images/creative_common88x31.png' style='border-width:0'/></a> Cette œuvre de <a href='http://blog.jetoile.fr' property='cc:attributionName' rel='cc:attributionURL' xmlns:cc='http://creativecommons.org/ns#'>http://blog.jetoile.fr</a> est mise à disposition selon les termes de la <a href='http://creativecommons.org/licenses/by/4.0/' rel='license'>licence Creative Commons Attribution 4.0 International</a>.
<!--img alt='Creative Commons License' src='http://i.creativecommons.org/l/by/2.0/fr/88x31.png' style='border-width:0; vertical-align: middle;'/> <small>Sauf mention contraire, le contenu de ce blog est mis à disposition selon les termes de la licence <a href='http://creativecommons.org/licenses/by/2.0/fr/'>Creative Commons Attribution 2.0 License</a>.</small-->
<br/>
<small>Powered by <a href="http://octopress.org">Octopress</a><br/>
</small>
</div>
</div>


    </div>
  </div>
</footer>

  </body>
</html>
