
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>

<script type="text/javascript">
    var host = "blog.jetoile.fr";
    if ((host == window.location.host) && (window.location.protocol != "https:"))
        window.location.protocol = "https";
</script>

  <meta charset="utf-8">
  <title>JBI : Qu'est Ce Que C'est? - Jetoile</title>
  <meta name="author" content="Khanh Maudoux">

  <meta content='blog sur Java jee' name='description'/>
  <meta content='jee, java, cloud, nosql' name='keywords'/>
  <meta content='index, follow' name='robots'/>
  <link href='url' rel='canonical'/>

  
  <meta name="description" content="JBI : Qu'est Ce Que C'est? December 7, 2009 Voilà mon premier article. Il a pour objectif de présenter JBI (Java Business Service) aussi connue sous &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://blog.jetoile.fr/2009/12/jbi-une-solution-enterree.html">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Jetoile" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>

  <script src="/javascripts/monthly_archive.js"></script>
  <!-- font-family: 'Knewave', cursive; -->
<link href='http://fonts.googleapis.com/css?family=Knewave' rel='stylesheet' type='text/css'>
<!-- font-family: 'Cantata One', serif; -->
<link href='http://fonts.googleapis.com/css?family=Cantata+One' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-11955429-1']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_setDomainName','github.io']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

  <body>
    <a href="/" class="home-icon">
      <img src="/images/home.png"/>
    </a>

    <article role="article" class="full-single-article">
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        <h1>JBI : Qu'est Ce Que C'est?</h1>
        <div class="meta">
          








  



<time datetime="2009-12-07T09:58:58+01:00" pubdate data-updated="true">December 7, 2009</time>  
        </div>
        <p><img src="http://4.bp.blogspot.com/_XLL8sJPQ97g/SyioXBC9u0I/AAAAAAAAAII/DM5NReY1mJ4/s200/jbi.png" alt="left" />
Voilà mon premier article. Il a pour objectif de présenter JBI (<em>Java Business Service</em>) aussi connue sous le doux nom de JSR 208 (<em>Java Specification Release</em>).</p>

<h1>Pourquoi un article sur JBI?</h1>

<p>Vous pouvez vous demander pourquoi un article sur JBI? Les réponses sont simples : j&#8217;aime bien cette spécification et je trouve qu&#8217;elle a du potentiel et qu&#8217;elle est sous exploitée.</p>

<p>Bien sûr, me direz-vous, en tant qu&#8217;utilisateur d&#8217;un PEtALS ou ServiceMix, pourquoi devrais-je comprendre la technologie sous-jacente? Eh bien, c&#8217;est une affaire de goût : si vous préférez utiliser un produit comme une boite noire, passer votre chemin. Par contre, si vous voulez comprendre ce qui se passe à l&#8217;intérieur, j&#8217;espère que cet article pourra répondre à vos attentes.</p>

<p>Autre interrogation : pourquoi m&#8217;embêter à comprendre une technologie qui ne décolle pas (du moins de ma fenêtre) et sur laquelle les éditeurs ne communiquent pas énormément (c&#8217;est vrai qu&#8217;ils préfèrent communiquer sur ce qu&#8217;ils offrent et non comment ils le font) ? Là encore, question de goût et puis qui croyait en l&#8217;émergence du téléphone portable ou même de la télé réalité ? (personnellement, je ne croyais ni en l&#8217;un ni en l&#8217;autre&hellip;) cqfd&hellip; ;&ndash;)</p>

<p>Ce premier article a donc pour objectif de présenter JBI. Seront abordés ses concepts généraux avec une approche telle que celle décrite dans ses spécifications ainsi qu&#8217;un succinct retour sur ce que je pense de JBI..</p>

<p>Cependant, ne seront pas abordés, ici, les mécanismes utilisés en son sein ainsi que des notions de SOA (de très bon article abordent déjà SOA) même si, qui dit JBI dit SOA (la réciproque n&#8217;est pas foncièrement vrai&hellip;).</p>

<p>Il est à noter que dans cet article j&#8217;utiliserai souvent le terme de composant (peut être à mauvais escient) au lieu du terme service. Il s&#8217;agit d&#8217;un abus de langage lié au fait que j&#8217;ai tenté d&#8217;être le plus clair possible et que en évitant d&#8217;aborder trop de notions afin d&#8217;éviter de vous perdre ;&ndash;).</p>

<!-- more -->


<h1>JBI : Qu&#8217;est ce que c&#8217;est?</h1>

<p>JBI (<em>Java Business Integration</em>) est définie dans sa première version par la JSR (<em>Java Specification Release</em>) 208. Elle a pour objectif de proposer une solution d&#8217;intégration de composants métiers et définie une norme pour l&#8217;assemblage des moyens d&#8217;intégration de composants.</p>

<p>JBI peut être vue comme le conteneur de service des ESB (<em>Enterprise Service Bus</em>)</p>

<blockquote><p>JBI defines what is sometimes termed a “service container” in Enterprise Service Bus (ESB) systems(&hellip;). &ndash; JBI_Spec</p></blockquote>

<p>et aborde l&#8217;intégration de composants métiers d&#8217;un point de vue infrastructure.</p>

<p>Il s&#8217;agit d&#8217;une spécification et doit donc être implémentée par ce que je nommerai dans le reste de cet article un JBI Provider.</p>

<p>Elle peut être vue comme une solution concurrente de SCA (<em>Service Component Architecture</em>), cependant, il n&#8217;en est rien : alors que SCA aborde l&#8217;intégration de composants d&#8217;un point de vue applicatif, JBI l&#8217;arborde d&#8217;un point de vue infrastructure. Cela en fait donc un très bon candidat pour héberger une solution basée sur SCA. Ces deux solutions doivent donc être vue comme complémentaires et non comme concurrentes.</p>

<p>JBI s&#8217;appuie sur des technologies web comme les WSDL (<em>Web Service Description Language</em>) pour la description des composants (nous verrons plus tard dans que cette notion de composant se trouve une notion de service) ou le XML (<em>eXtensible Markup Language</em>) pour l&#8217;échange des messages.</p>

<p>Si je devais définir JBI en une phrase, je dirais qu&#8217;il s&#8217;agit d&#8217;une spécification visant à définir un conteneur de conteneurs pour offrir une solution normalisée pour l&#8217;intégration de composants métiers. Les conteneurs étant des composants qui hébergent les services que nous verront plus tard.</p>

<h1>Concepts</h1>

<p>Cette partie tentera d&#8217;expliquer ses concepts qui, je pense, sont nécessaires pour comprendre son fonctionnement et utiliser une solution basée sur JBI.</p>

<h2>Fonctionnement général</h2>

<p>Un environnement JBI expose des services qui interagisent entre eux via un échange asynchrone de message au format XML. Cela permet un couplage faible entre les services. De plus, afin de découpler encore plus l&#8217;échange de messages, c&#8217;est l&#8217;environnement qui est chargé de les router. En fait, les services sont hébergés au sein de composants, mais c&#8217;est l&#8217;objet des paragraphes suivants&hellip; ;&ndash;)</p>

<h2>Notion de composants JBI</h2>

<p>JBI définit deux types de composants :</p>

<ul>
<li>Les Service Engine (SE) qui sont des composants qui fournissent la logique métier et des services de transformation aux autres composants. Ils peuvent également être consommateur (nous reviendront sur la notion de consommateurs et de producteurs) d’autres SEs.</li>
<li>Les Binding Component (BC) qui sont des composants qui assurent la connectivité pour les services extérieurs à l’environnement JBI. Cela peut impliquer les protocoles de communication ou des services fournis par le SI de l’entreprise.</li>
</ul>


<p>Il est à noter que dans la première version de JBI, la différence entre les SE et les BC est purement conceptuelle puisqu&#8217;il n&#8217;existe pas de différence de traitement entre l&#8217;un ou l&#8217;autre</p>

<blockquote><p>Service engines and binding components can function as service providers, consumers, or both. (The distinction between SEs and BCs is purely pragmatic, but is based on sound architectural principles. The separation of business (and processing) logical from communications logic reduces implementation complexity, and increases flexibility.) &ndash; JBI_Spec.</p></blockquote>

<p>Afin de clarifier la notion de composant (SE ou BC), voici une liste de composants (cette liste n&#8217;est pas exhaustive et est spécifique au JBI Provider : rien n&#8217;est dit à ce propos dans la spécification) :</p>

<ul>
<li><p>exemple de SE :</p>

<ul>
<li>SE XSLT (<em>eXtensible Stylesheet Language Transformations</em>) qui permet d’appliquer une transformation d’un fichier/message XML à partir d’une feuille de style XSL,</li>
<li>SE Validator qui permet de valider un message grâce à son XSD,</li>
<li>SE CSV (<em>Comma-Separated Value</em>) qui permet de transformer un document au format CSV en document au format XML,</li>
<li>SE EIP (<em>Enterprise Integration Pattern</em>) qui permet d’implémenter certains patrons d’intégration d’entreprise,</li>
<li>SE JSR181 (<em>Web Services Metadata for the java Platform</em>) qui permet d’exposer un POJO (Plain Old Java Object) annoté comme un service JBI,</li>
<li>SE POJO (<em>Plain Old Java Object</em>) qui permet de déployer des classes Java comme des services,</li>
<li>SE BPEL (<em>Business Process Execution Language</em>) qui permet d&#8217;offrir un moteur d&#8217;exécution BPEL,</li>
<li>SE SCA (<em>Service Component Architecture</em>) qui permet d&#8217;offrir une implémentation de SCA,</li>
<li>&hellip;</li>
</ul>
</li>
<li><p>exemple de BC :</p>

<ul>
<li>BC FileTransfert qui permet d’envoyer et de recevoir des fichiers,</li>
<li>BC FTP (<em>File Transfert Protocol</em>) qui permet le transfert et le listage de fichiers sur un serveur ftp,</li>
<li>BC JMS (<em>Java Message Service</em>) qui permet de s’interconnecter avec des Destinations (Queue/Topic) extérieures,</li>
<li>BC SMTP qui permet d’émettre et de recevoir des fichiers d’un service de mail extérieur,</li>
<li>BC SOAP (<em>Simple Object Access Protocol</em>) qui permet de s’interconnecter avec un service Web extérieur afin d’exposer des services JBI comme des services Web,</li>
<li>BC XMPP (<em>eXtensible Messaging and Presence Protocol</em>) qui permet de s’interconnecter avec le protocole XMPP qui est un protocole standard de messagerie instantané (Google Talk, Jabber, …),</li>
<li>&hellip;</li>
</ul>
</li>
</ul>


<p>Un composant JBI se présente sous forme de fichier zippé et doit être installé dans l&#8217;environnement JBI (en fait, dans ce fichier zip, des informations contenues dans le fichier jbi.xml se trouvant dans le répertoire META-INF spécifie le composant -cycle de vie &amp; co. &ndash;).</p>

<h2>Notion de Service Unit et Service Endpoint</h2>

<p>Les composants JBI (SE ou BC) offrent un comportement général et leur utilisation est spécifique au besoin : par exemple, la réception de Messages JMS ne se fait pas toujours sur la même Destination et cela doit être configurable. De même, un fichier XML est considéré comme valide via son schéma XSD. Aussi il est nécessaire de configurer ces composants. C&#8217;est pour cette raison qu&#8217;ils peuvent être vus comme des conteneurs. Cette étape où à un composant générique (comme un BC File System) est associé sa spécificité (dire au BC File System qu&#8217;il doit scruter un répertoire particulier) est appelée configuration du composant. C&#8217;est suite à sa configuration qu&#8217;un composant expose un service en tant que tel.</p>

<p>De plus, il ne faut pas oublier que le but premier de JBI est d&#8217;offrir des possibilités d&#8217;assemblage : l&#8217;environnement JBI offre un certain nombre de &ldquo;meta-services&rdquo; au reste du monde qui est un assemblage d&#8217;autres services qui sont hébergés en son sein ou non. Pour ce faire, une notion de services fournisseurs (provider) et de services consommateurs (consumer) a été introduite :
* un service provider permet d&#8217;intégrer un service dans l’environnement JBI
* un service consumer permetd&#8217;exposer un service dans l’environnement JBI
Cette spécificité du service est également faite lors de la phase de configuration du composant.</p>

<p>En fait, la notion de fournisseur et de consommateur doit être vu du point de vue de l&#8217;environnement JBI. Par exemple, afin d&#8217;offrir un service disponible qui écoute sur la Queue JMS &ldquo;myQueue&rdquo;, il faut donc configurer le composant BC JMS (dans le cas du JBI Provider PEtALS) comme consommateur en lui fournissant le nom de la Queue qu&#8217;il écoute. De même, si un service doit être utilisé par un autre service de l&#8217;environnement JBI, il doit être défini comme fournisseur (en fait, plus techniquement, un service fournisseur est enregistré dans l&#8217;annuaire interne de l&#8217;environnement JBI et peut ainsi être utilisable par d&#8217;autres services alors qu&#8217;un service consommateur n&#8217;est pas accessible à d&#8217;autres services de l&#8217;environnement JBI).</p>

<p>Cette phase de configuration est faite via un <em>Service Unit</em> (SU). Ainsi, pour résumer, un composant JBI dans l&#8217;environnement JBI ne fait rien et doit être configuré via un ou des SU pour exposer un ou des services. C&#8217;est pour cette raison que j&#8217;ai préalablement définie JBI comme un conteneur de conteneurs : un composant JBI peut être vu comme un conteneur de service (un peu comme un conteneur de servlet qui, en soit, ne fait rien mais dans lequel des servlets doivent être déployées afin qu&#8217;il offre une réelle utilitée).</p>

<p>Cependant, une autre question peut se poser : comment sont accessibles les composants JBI configurés comme provider&hellip; ? En fait, le SU permet de définir le endpoint (appelé ServiceEndpoint) par lequel le service exposé par le composant sera accessible. Inversement, un composant JBI configuré comme consumer doit préciser avec quel(s) service(s) il interagit (n&#8217;oublions pas que les services ont besoin de communiquer entre eux). Cela est fait également via les endpoints.</p>

<p>Plus concrètement, un SU se présente sous forme d&#8217;un fichier zippé et doit être déployé sur un composant JBI (en fait, dans ce fichier zip doit se trouver un fichier jbi.xml dans le répertoire META-INF qui précise s&#8217;il est fournisseur -et dans ce cas, son endoint- ou s&#8217;il est consommateur -et dans ce cas, le ou les endpoint avec le(s)quel il interagit-). Les autres informations nécessaires à la configuration du service doivent également être présentent dans le SU : un SU permet donc de configurer un composant (SE ou BC) afin de lui fournir une logique de fournisseur ou de consommateur ainsi que son ServiceEndpoint associé. Il permet également de fournir d’autres informations au composant comme le répertoire d’écoute (dans le cas d’un BC consommateur) ou d’écriture (dans le cas d’un BC fournisseur) pour le BC transfert de fichiers (BC permettant de scruter un répertoire pour lire les fichiers qui y sont déposés ou permettant d’écrire dans ce répertoire).</p>

<h1>Notion de Service Assembly</h1>

<p>Dans les paragraphes précédents, ont été introduit les notions de componsants JBI, de services (au sens JBI) et de ServiceEndpoint : il a été vu qu&#8217;un composant doit être configuré par un SU qui lui offre la notion de service via la déclaration (entre autres) de ses endpoint.</p>

<p>En fait, pour déployer un SU dans l’environnement JBI, il faut utiliser un SA (<em>Service Assembly</em>) dans lequel est indiqué quel(s) SU(s) configure(nt) un composant donné. Ce SA contient également les SU (un SU ne peut être déployé directement et doit l&#8217;être au travers d&#8217;un SA).</p>

<h1>Notion de Normalized Message Router</h1>

<p>En introduction, il a été dit que c&#8217;était l&#8217;environnement JBI qui avait à sa charge l&#8217;émission des messages transitant entre services. En fait, c&#8217;est le routeur de messages normalisés (<em>Normalized Message Router</em>) qui reçoit les messages échangés et qui les redirige vers leurs destinataires respectifs. C&#8217;est lui qui permet de découpler les fournisseurs de service et les consommateurs de service.</p>

<p>En outre, il est essentiel de noter que dans les spécifications il est dit que quand un message échangé est routé par le fournisseur de service, il doit toujours être renvoyé au composant initiateur de l’échange :</p>

<blockquote><p>&ldquo;When a message exchange is routed from the service provider, it MUST always be sent to the component that originated the exchange. Subsequent sending of the exchange from the consumer to provider MUST always send the exchange to the provider endpoint selected during the initial send of the exchange&rdquo; &ndash; JBI_Spec</p></blockquote>

<p>Cela implique qu&#8217;il n&#8217;est pas possible de chainer directement les appels entre les services (en fait, techniquement, cela est possible mais les composants deviendraient alors fortement couplé ce qui est contraire à la philosophie JBI et SOA) : un composant (qui est alors un SE) doit donc être garant de la médiation des messages.</p>

<p>Ce composant JBI chargé d&#8217;offrir la notion de médiation entre les messages (cela sort du périmètre des spécifications JBI) est généralement fourni par les JBI Provider et est implémenté de manière spécifique :
* le JBI Provider PEtALS de EBM Websourcing propose son propre composant SE EIP,
* et les JBI Provider OpenESB de Sun et ServiceMix d&#8217;apache utilise un SE basé sur apache Camel.</p>

<p>En fait, les SE EIP ou le SE apache Camel s&#8217;appuient sur les EIP (<em>Enterprise Integration Patterns</em>) qui sont des designs pattern pour tous ce qui est l&#8217;échange de message asynchrone (un article sera fait ultérieurement sur ce point).</p>

<p>De plus, en fonction du type de messages, le Normalized Message Router (NMR) offre une gestion de qualité de service variable :
* stratégie meilleur effort : les messages peuvent être perdus ou délivrés plus d’une fois,
* stratégie au moins un : les messages peuvent être perdus mais ne peuvent pas être délivrés plus d’une fois,
* stratégie un et un seul : les messages sont assurés d’être délivrés une et une seule fois.</p>

<p>Ainsi, pour résumer, on peut dire que le NMR joue le rôle de médiateur dans l&#8217;environnement JBI (en fait, dans l’environnement JBI, les messages sont normalisés et encapsulés par les composants dans un MessageExchange (ME) contenant des propriétés (metadata) afin d’être envoyés d’un composant à un autre. Les BCs et SEs interagissent avec le routeur de messages normalisés via un DeliveryChannel qui est bidirectionnel. En outre, il est possible d’associer des pièces jointes aux MEs).</p>

<h2>Message Exchange Patterns (MEP)</h2>

<p>Un JBI Provider permet d&#8217;émettre et de recevoir des messages (ME) entre les divers services qu&#8217;il héberge au travers de composants. En fait, ces transmissions de messages suivent certains patterns qui sont définis au nombre de 4 (en fait, ce nombre n&#8217;est pas imposé et chaque JBI Provider est libre d&#8217;un offrir plus) :</p>

<ul>
<li>In-Only</li>
</ul>


<p><img src="http://3.bp.blogspot.com/_XLL8sJPQ97g/SxzF-Wzfz_I/AAAAAAAAAEc/2_KfWG0qdqY/s400/Image1.png" alt="center" /></p>

<ul>
<li>In-Out</li>
</ul>


<p><img src="http://4.bp.blogspot.com/_XLL8sJPQ97g/SxzGH7vqLXI/AAAAAAAAAEs/6Hv5OsZS3pI/s400/Image3.png" alt="center" /></p>

<ul>
<li>In-Optional Out</li>
</ul>


<p><img src="http://3.bp.blogspot.com/_XLL8sJPQ97g/SxzGO2sFd7I/AAAAAAAAAE0/xjnLA3PIHjY/s400/Image4.png" alt="center" /></p>

<ul>
<li>Robust In-Only</li>
</ul>


<p><img src="http://3.bp.blogspot.com/_XLL8sJPQ97g/SxzGDeqLnjI/AAAAAAAAAEk/wRFwV4IanRM/s400/Image2.png" alt="center" /></p>

<p>En fait, ce pattern d&#8217;échange (Message Exchange Pattern &ndash; MEP- ) est positionné par le composant émetteur (ou plutôt, pour être plus précis, par sa configuration et donc le SU), et c&#8217;est au composant recevant le message de préciser les patterns qu&#8217;il supporte et comment il les supporte (par exemple, un BC JMS en mode fournisseur ne fournit pas de réponse s&#8217;il ne fait qu&#8217;émettre. Aussi, les MEPs qu&#8217;il supporte ne peuvent être que In-Only ou Robust In-Only).</p>

<h1>Cycle de vie des composants, SU et SA</h1>

<p>Jusque là, les chapitres précédents ont traité les notions et concepts apportés par les spécifications JBI. Parmi ces notions, nous avons vu qu&#8217;il existait réellement trois &ldquo;objets&rdquo; manipulables : les composants JBI, les SUs et les SAs.</p>

<p>En fait, ces trois &ldquo;objets&rdquo; disposent de leur propre cycle de vie :</p>

<ul>
<li>Cycle de vie du composant JBI</li>
</ul>


<p><img src="http://1.bp.blogspot.com/_XLL8sJPQ97g/SxzHqws3v5I/AAAAAAAAAE8/msIKJNQ0FDs/s200/Image6.png" alt="center" /></p>

<ul>
<li>Cycle de vie du SU</li>
</ul>


<p><img src="http://2.bp.blogspot.com/_XLL8sJPQ97g/SxzHy5e8r5I/AAAAAAAAAFE/9TDIzCLqN-U/s200/Image5.png" alt="center" /></p>

<ul>
<li>Cycle de vie du SA</li>
</ul>


<p><img src="http://2.bp.blogspot.com/_XLL8sJPQ97g/SxzHy5e8r5I/AAAAAAAAAFE/9TDIzCLqN-U/s200/Image5.png" alt="center" /></p>

<p>Un composant JBI doit être démarré pour être fonctionnel.</p>

<p>Il en est de même pour SU. Cependant, étant contenu dans un SA, il suit, en fait, le même cycle de vie que ce dernier.</p>

<p>La procédure consistant à installer un composant JBI dans l&#8217;environnement s&#8217;appelle installation, alors que la procédure consistant à déployer un SU dans un composant (au travers d&#8217;un SA) s&#8217;appelle déploiement.</p>

<h2>Features</h2>

<p>Dans les précédents paragraphes, nous avons survolé les notions utilisées par JBI. Cependant, les spécifications JBI apportent également des précisions sur les points suivants :
* JMX (<em>Java Management eXtension</em>) : un JBI Provider doit fournir une interface (au sens Java du terme) JMX d&#8217;administration
* Ant : un JBI Provider doit offrir des targets Ant pour gérer le cycle de vie des composants (installation/déploiement, démarrage, arrêt, désinstallation/undeployment)
* Shared Library : ce composant non abordé précédemment est une sorte de bundle contenant des librairies accessible de tout l&#8217;environnement JBI. Il dispose de son propre cycle de vie (installation, désinstallation) et permet, pour simplifier, un mécanisme de chargement/déchargement dynamique de librairie au sein de l&#8217;environnement.</p>

<h1>Avis sur JBI</h1>

<p>Ce paragraphe fait un retour de mon humble avis sur JBI. Je n&#8217;aborderai pas ici ses implémentations comme PEtALS, ServiceMix ou OpenESB puisque de très bon articles existent déjà et qu&#8217;ils couvrent bien mieux que je ne saurai le faire leurs prises en main et la description de leurs spécificités.</p>

<h2>Points faibles</h2>

<h3>EIP Provider</h3>

<p>Dans les spécifications, une phrase doit vraiment marquer le lecteur :</p>

<blockquote><p>&ldquo;When a message exchange is routed from the service provider, it MUST always be sent to the component that originated the exchange. Subsequent sending of the exchange from the consumer to provider MUST always send the exchange to the provider endpoint selected during the initial send of the exchange&rdquo; &ndash; JBI_Spec</p></blockquote>

<p>Cette simple citation a de grosses conséquences quant à l&#8217;utilisation de JBI : en effet, elle impose qu&#8217;il est nécessaire de déléguer à un composant tierce la gestion du chaînage d&#8217;appels, du routage, du filtrage, &hellip;</p>

<p>En effet, l&#8217;une des forces de JBI est d&#8217;offrir un environnement où les composants sont faiblement couplés et dialoguent de manière asynchrone grâce au NMR (entre autre) et il est important de ne pas oublier que JBI permet d&#8217;intégrer des composants métiers. Ces services métiers sont cependant hétérogènes et peuvent ne pas parler exactement le même dialecte. Aussi, ils ont besoin de médiation (routage, filtrage, transformation, &hellip;) et donc de mécanismes tels que ceux décrits par les EIP (Enterprise Integration Pattern) qui décrivent des patterns pour la gestion des échanges asynchrones. Cependant, ce mécanisme n&#8217;est pas directement utilisable (puisque la réponse doit toujours être réémise à l&#8217;émetteur du message) et un composant spécifique doit être utilisé.</p>

<p>Il peut s&#8217;agir, dans le cas de ServiceMix ou OpenESB, du composant SE Camel ou, dans le cas de PEtALS, du SE EIP. Cela apporte un surcouche supplémentaire et un point de contension au système. En outre, cela peut sembler peu naturel.</p>

<p>En outre, l&#8217;implémentation du SE EIP diffère en fonction du JBI Provider et on peut ne pas l&#8217;aimer (pour ma part, je n&#8217;aime pas du tout Apache Camel&hellip; mais cela fera l&#8217;objet d&#8217;un article ultérieur&hellip;).</p>

<p>Du coup, j&#8217;aurai envie de dire que sur ce point, JBI a oublié son but premier en ne couvrant pas ce point essentiel.</p>

<p>En outre, les solutions offertes par les JBI Provider peuvent manquer de maturité (question de point de vue) et surtout, pour l&#8217;instant, d&#8217;une norme pour les utiliser de manière plus <em>user-friendly</em>.</p>

<p>Bien sûr, un moteur SCA, BPEL ou BPMN pourrait répondre à ce besoin mais ils ne couvrent pas le même besoin (qui sont plus applicatifs que techniques) et cela sort du scope de JBI et donc de cet article.</p>

<h3>Qui fait quoi?</h3>

<p>Les composants JBI sont tous spécifiques et doivent être compris par l&#8217;utilisateur. Cela peut, du coup, être un peu repoussant et demander une recherche de la documentation.</p>

<h3>Portage des composants JBI d&#8217;un JBI Provider à l&#8217;autre</h3>

<p>Sur le papier les composants JBI doivent pouvoir être installés sur n&#8217;importe quel JBI Provider. En fait, cela n&#8217;est pas tout à fait exacte et pour en porter un, il faut parfois s&#8217;arracher les cheveux. En outre, il ne faut pas oublier qu&#8217;un composant JBI doit être configuré (via un SU) pour être utilisable, et généralement, le déploiement d&#8217;un SU sur un composant qu&#8217;on a réussi à installer (c&#8217;est déjà pas mal&hellip;) sur un JBI Provider tierce s&#8217;avère être également peu aisé&hellip;</p>

<h2>Points forts</h2>

<p>Le point fort de JBI est, de mon point de vue, qu&#8217;il offre un conteneur de conteneurs.</p>

<p>En outre, il existe un grand nombre de ces conteneurs (au sens composants JBI du terme) offerts par les différents JBI Provider et généralement, ils peuvent suffire à répondre au besoin.</p>

<p>Si tel est le cas, une utilisation d&#8217;un JBI Provider s&#8217;avère simple (il suffit de copier/coller le composant JBI, de le configurer via l&#8217;écriture d&#8217;un SU et de le déployer en copiant/collant le SA qui contient le SU).</p>

<p>En fait, dans ce cas, le plus gros du travail est la configuration des composants JBI et donc l&#8217;écriture d&#8217;un fichier XML.</p>

<h1>Conclusion</h1>

<p>Suite à cet article, la question qui peut se poser est : Ai-je vraiment besoin de JBI ? En fait, j&#8217;aurai envie de dire que cela dépend du besoin. Si le besoin est la mise en place d&#8217;une grosse infrastructure qui doit être déployée sur plusieurs sites/noeuds, une implémentation JBI peut être un bon choix. Par contre, si les besoins sont plus des problématiques de médiation au sein d&#8217;un controlleur, alors un simple EIP Provider (tel que Apache Camel, Spring Integration ou Mule iBeans) suffit.</p>

<p>En conclusion, je pense que pour pouvoir utiliser pleinement un ESB basé sur JBI, il est important d&#8217;avoir un minimum de connaissance de JBI et cela, même si les JBI Provider préfèrent communiquer plus sur ce que peut apporter leur produit que sur le comment (mais cela est normal au final&hellip; ).</p>

<h1>Pour aller plus loin&hellip;</h1>

<ul>
<li><strong>SOA : le guide de l’architecte</strong> de X. Fourner-Morel, P. Grojean, G. Plouin et C. Rognon chez Dunod</li>
<li><strong>Enterprise Integration Patterns</strong> de G. Hohpe et B. Woolf chez Addisson Wesley</li>
<li>Spécification de JBI : <a href="http://jcp.org/aboutJava/communityprocess/edr/jsr208/index.html">http://jcp.org/aboutJava/communityprocess/edr/jsr208/index.html</a></li>
<li>Site de PEtALS : <a href="http://petals.objectweb.org/">http://petals.objectweb.org/</a></li>
<li>Site de ServiceMix : <a href="http://servicemix.apache.org">http://servicemix.apache.org</a></li>
<li>Article du site InfoQ sur la problématique de médiation/orchestration avec JBI : <a href="http://www.infoq.com/articles/louis-dutoo-esb-routing">http://www.infoq.com/articles/louis-dutoo-esb-routing</a></li>
<li>Article du site JDJ sur JBI et ServiceMix : <a href="http://java.sys-con.com/node/117740">http://java.sys-con.com/node/117740</a></li>
<li>Article du site JavaWorld sur ServiceMix : <a href="http://www.javaworld.com/javaworld/jw-12-2005/jw-1212-esb.html">http://www.javaworld.com/javaworld/jw-12-2005/jw-1212-esb.html</a></li>
<li>Article du blog de Chip Overclock sur JBI : <a href="http://coverclock.blogspot.com/2007/01/fun-facts-to-known-and-tell-java.html">http://coverclock.blogspot.com/2007/01/fun-facts-to-known-and-tell-java.html</a></li>
<li>Article du site de Architect zone sur ServiceMix : <a href="http://architects.dzone.com/articles/pattern-based-development-with-0">http://architects.dzone.com/articles/pattern-based-development-with-0</a></li>
<li>Article du site Java World sur une étude de cas avec ServiceMix : <a href="http://www.javaworld.com/javaworld/jw-09-2006/jw-0904-jbi.html">http://www.javaworld.com/javaworld/jw-09-2006/jw-0904-jbi.html</a>
<a href="http://opensourceesb.blogspot.com/2007/10/using-petals-jbi-components-in.html">http://opensourceesb.blogspot.com/2007/10/using-petals-jbi-components-in.html</a></li>
<li>Site de OSOA (Open Service Oriented Architecture) : <a href="http://www.osoa.org/display/Main/Service+Component+Architecture+Home">http://www.osoa.org/display/Main/Service+Component+Architecture+Home</a></li>
<li>Blog de The Server Labs sur JBI et SCA : <a href="http://www.theserverlabs.com/blog/2009/07/07/developing-apps-with-sca-and-jbi/  ">http://www.theserverlabs.com/blog/2009/07/07/developing-apps-with-sca-and-jbi/  </a>
<a href="http://blogs.sun.com/tombarrett/entry/sca_raining_on_the_jbi">http://blogs.sun.com/tombarrett/entry/sca_raining_on_the_jbi</a></li>
<li>Blog de Bruce Snyder comparant JBI et SCA : <a href="http://www.jroller.com/bsnyder/entry/jbi_and_sca_are_complimentary">http://www.jroller.com/bsnyder/entry/jbi_and_sca_are_complimentary</a></li>
<li>Blog de Frank Wolgang comparant JBI et SCA : <a href="http://apps.itemis.de/roller/wfrank/entry/jbi_2_0_jbi_vs">http://apps.itemis.de/roller/wfrank/entry/jbi_2_0_jbi_vs</a></li>
<li>Article du site Le Monde Informatique sur SCA : <a href="http://blog1.lemondeinformatique.fr/ingenierie_logicielle/2006/01/sca_raction_de_.html">http://blog1.lemondeinformatique.fr/ingenierie_logicielle/2006/01/sca_raction_de_.html</a></li>
<li>Blog de Xebia sur les ESB légers : <a href="http://blog.xebia.fr/2007/12/17/spring-integration-lavenement-des-lightweight-esb/">http://blog.xebia.fr/2007/12/17/spring-integration-lavenement-des-lightweight-esb/</a></li>
</ul>



<footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Khanh Maudoux</span></span>

      </p>
      <p class="meta">
      








  



<time datetime="2009-12-07T09:58:58+01:00" pubdate data-updated="true">December 7, 2009</time> in 

<span class="categories">
  
    <a class='category' href='/blog/categories/java/'>java</a>, <a class='category' href='/blog/categories/jbi/'>jbi</a>, <a class='category' href='/blog/categories/soa/'>soa</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="https://blog.jetoile.fr/2009/12/jbi-une-solution-enterree.html" data-via="jetoile" data-counturl="https://blog.jetoile.fr/2009/12/jbi-une-solution-enterree.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
</footer>

<!--
<section>
<h1>Comments</h1>
<script>
var idcomments_acct = '1a2a89d3b135fb1f774e938fd286d920';
var idcomments_post_id;
var idcomments_post_url;
</script>
<span id="IDCommentsPostTitle" style="display:none"></span>
<script type='text/javascript' src='http://www.intensedebate.com/js/genericCommentWrapperV2.js'></script>

</section>
-->


  <section>
    <h1>Comments</h1>

    
<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'jetoile'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

<!--
<div id="disqus_thread"></div>
  

<script type="text/javascript">
      var disqus_shortname = 'jetoile';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'https://blog.jetoile.fr/2009/12/jbi-une-solution-enterree.html';
        var disqus_url = 'https://blog.jetoile.fr/2009/12/jbi-une-solution-enterree.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>

  </section>


      </div>
    </div>
  </div>
-->


</article>

<hr class="divider-short"/>

<div class="archive-link">
  <div class="container">
    <div class="row">
      <a class="pull-center" href="/" title="Home">Home</a>
    </div>
    <div class="row">
      <div class="col-md-8 col-md-offset-2">
        

        
          <a class="pull-right" href="/2009/12/eip-quest-ce-que-cest.html" title="Next Post: EIP : Qu'est ce que c'est">Next: EIP : Qu'est ce que c'est &raquo;</a>
        
      </div>
    </div>
  </div>
</div>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<script type="text/javascript">
  window.___gcfg = {lang: 'fr'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/platform.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

    <footer id="footer" class="her-row">
  <div class="container">
    <div class="row">
      <div id='footer-shadow'></div>
<!--//please give me a respect for keep these credits line -->
<div class='credits'>
<div align='center'>

<table style="border:none;border-spacing: 20px;border-collapse: separate;">
<tr style="border:none">
<td style="border:none">
<a href="http://twitter.com/jetoile" class="twitter-follow-button" data-show-count="false" data-lang="fr">Follow @jetoile</a>
<script src="http://platform.twitter.com/widgets.js" type="text/javascript"></script>
</td>
<td style="border:none">
<a href="https://plus.google.com/u/0/114765959876500830478/posts?prsrc=3" style="text-decoration: none; color: #333;"><div style="display: inline-block;"><span style="float: left; font: bold 13px/16px arial,sans-serif; margin-right: 4px; margin-top: 7px;">khanh</span><span style="float: left; font: 13px/16px arial,sans-serif; margin-right: 11px; margin-top: 7px;">on</span><div style="float: left;"><img src="/images/gplus-32.png" width="32" height="32" style="border: 0;"/></div><div style="clear: both"></div></div></a>
</td>
<td style="border:none">
<a href="http://fr.linkedin.com/pub/khanh-tuong-maudoux/19/92b/11b"><img src="/images/btn_profile_bluetxt_8
0x15_fr_FR.png" width="80" height="15" border="0" alt="Voir le profil de Khanh Tuong Maudoux sur LinkedIn" /></a>
</td>
</tr>
</table>


<img alt='Jetoile' height='50' src='/images/logoJetoile_v51.png' style='border-width:0; vertical-align: middle' width='180'/>
<p>&#169; 2011 <a href='http://blog.jetoile.fr/'>Je toile ou j* au choix...</a> - Khanh Maudoux</p>
<a href='http://creativecommons.org/licenses/by/4.0/' rel='license'><img alt='Licence Creative Commons' src='/images/creative_common88x31.png' style='border-width:0'/></a> Cette œuvre de <a href='http://blog.jetoile.fr' property='cc:attributionName' rel='cc:attributionURL' xmlns:cc='http://creativecommons.org/ns#'>http://blog.jetoile.fr</a> est mise à disposition selon les termes de la <a href='http://creativecommons.org/licenses/by/4.0/' rel='license'>licence Creative Commons Attribution 4.0 International</a>.
<!--img alt='Creative Commons License' src='http://i.creativecommons.org/l/by/2.0/fr/88x31.png' style='border-width:0; vertical-align: middle;'/> <small>Sauf mention contraire, le contenu de ce blog est mis à disposition selon les termes de la licence <a href='http://creativecommons.org/licenses/by/2.0/fr/'>Creative Commons Attribution 2.0 License</a>.</small-->
<br/>
<small>Powered by <a href="http://octopress.org">Octopress</a><br/>
</small>
</div>
</div>


    </div>
  </div>
</footer>

  </body>
</html>
